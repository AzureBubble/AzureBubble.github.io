<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>FomalhautğŸ¥</title>
  
  
  <link href="https://azzurebubble.github.io/atom.xml" rel="self"/>
  
  <link href="https://azzurebubble.github.io/"/>
  <updated>2024-07-20T09:05:24.053Z</updated>
  <id>https://azzurebubble.github.io/</id>
  
  <author>
    <name>Rock</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>UGUIæºç è§£æâ€”â€”LayoutGroup</title>
    <link href="https://azzurebubble.github.io/posts/51e1a8f9.html"/>
    <id>https://azzurebubble.github.io/posts/51e1a8f9.html</id>
    <published>2024-07-20T07:32:34.000Z</published>
    <updated>2024-07-20T09:05:24.053Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>LayoutGroupï¼šLayoutGroupæ˜¯æ§åˆ¶å­å¸ƒå±€å¯¹è±¡ç»„ä»¶çš„åŸºç±»ï¼Œå®ç°äº†ILayoutElementå’ŒILayoutGroupæ¥å£ï¼Œç»§æ‰¿è‡ªUIBehaviourï¼Œè¯´æ˜å®ƒæ—¢æ˜¯ä¸€ä¸ªå¸ƒå±€å…ƒç´ ä¹Ÿæ˜¯ä¸€ä¸ªå¸ƒå±€æ§åˆ¶å™¨ï¼ŒHorizontalLayoutGroupã€VerticalLayoutGroupã€GridLayoutGroupéƒ½ç»§æ‰¿æˆ–é—´æ¥ç»§æ‰¿äº†æ­¤ç±»ã€‚</p></blockquote><h4 id="æºç è§£æ">æºç è§£æ</h4><h5 id="ç‰¹æ€§">ç‰¹æ€§</h5><blockquote><p>[DisallowMultipleComponent]ï¼šä¸å…è®¸ç»„ä»¶å¯¹è±¡æŒ‚è½½é‡å¤çš„è¿™ä¸ªè„šæœ¬ã€‚</p><p>[ExecuteAlways]ï¼šç¡®ä¿è„šæœ¬åœ¨ç¼–è¾‘å™¨å’Œæ¸¸æˆè¿è¡Œæ—¶éƒ½èƒ½è¢«æ‰§è¡Œã€‚</p><p>[RequireComponent(typeof(RectTransform))]ï¼šç¡®ä¿ç»„ä»¶å¯¹è±¡æŒ‚è½½äº†RectTransformç»„ä»¶ã€‚</p></blockquote><h5 id="å†…éƒ¨å®ç°">å†…éƒ¨å®ç°</h5><blockquote><p>m_Paddingï¼šå¯ä»¥åœ¨Unityçš„Inspectorçª—å£ä¸­ç›´è§‚çš„è°ƒæ•´å’Œé…ç½®è¿™ä¸ªçŸ©å½¢åŒºåŸŸçš„è¾¹è·åç§»é‡ï¼Œè€Œæ— éœ€é€šè¿‡ä»£ç è¿›è¡Œç¡¬ç¼–ç ã€‚</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// RectOffset ç±»å‹ç”¨äºå®šä¹‰çŸ©å½¢åŒºåŸŸçš„åç§»é‡ã€‚å®ƒé€šå¸¸ç”¨äº UI å¸ƒå±€ä¸­ï¼Œä¾‹å¦‚åœ¨å®ç°è¾¹è·ï¼ˆpaddingï¼‰æˆ–è€…è¾¹æ¡†ï¼ˆborderï¼‰æ—¶éå¸¸æœ‰ç”¨ã€‚</span></span><br><span class="line"><span class="keyword">protected</span> RectOffset m_Padding = <span class="keyword">new</span> RectOffset();</span><br><span class="line"><span class="comment">// æ§åˆ¶å­å¸ƒå±€å…ƒç´ å‘¨å›´çš„è¾¹è·åç§»é‡ã€‚</span></span><br><span class="line"><span class="keyword">public</span> RectOffset padding &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> m_Padding; &#125; <span class="keyword">set</span> &#123; SetProperty(<span class="keyword">ref</span> m_Padding, <span class="keyword">value</span>);</span><br></pre></td></tr></table></figure><blockquote><p>SetPropertyï¼šå¸®åŠ©å™¨æ–¹æ³•ï¼Œç”¨äºåœ¨ç»™å®šå±æ€§å‘ç”Ÿæ›´æ”¹æ—¶è®¾ç½®è¯¥å±æ€§ã€‚</p><p>è¿™æ˜¯ç±»ä¼¼MVVMæ¨¡å¼ä¸­çš„ä½¿ç”¨æ–¹æ³•</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">SetProperty</span>&lt;<span class="title">T</span>&gt;(<span class="params"><span class="keyword">ref</span> T currentValue, T newValue</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> ((currentValue == <span class="literal">null</span> &amp;&amp; newValue == <span class="literal">null</span>) || (currentValue != <span class="literal">null</span> &amp;&amp; currentValue.Equals(newValue)))</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    currentValue = newValue;</span><br><span class="line">    SetDirty();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>SetDirtyï¼šæ ‡è®°LayoutGroupä¸ºDirtyï¼Œæ ‡è®°å½“å‰å¯¹è±¡çš„å¸ƒå±€æ˜¯å¦éœ€è¦é‡æ–°æ„å»ºï¼Œå¦‚æœæ˜¯å¤±æ´»çŠ¶æ€å°†ä¸ä¼šè¢«æ ‡è®°ã€‚</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">SetDirty</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å¤±æ´»çŠ¶æ€åˆ™ä¸æ ‡è®°</span></span><br><span class="line">    <span class="keyword">if</span> (!IsActive())</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å½“å‰ä¸åœ¨è¿›è¡Œå¸ƒå±€é‡å»ºä¸­åˆ™é€šè¿‡LayoutRebuilder.MarkLayoutForRebuildæ¥æ ‡è®°å½“å‰å¯¹è±¡çš„å¸ƒå±€éœ€è¦é‡æ–°æ„å»º</span></span><br><span class="line">    <span class="keyword">if</span> (!CanvasUpdateRegistry.IsRebuildingLayout())</span><br><span class="line">        LayoutRebuilder.MarkLayoutForRebuild(rectTransform);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="comment">// å¦åˆ™å¯åŠ¨ä¸€ä¸ªåç¨‹DelayedSetDirtyï¼Œå»¶è¿Ÿæ ‡è®°æ­¤å¯¹è±¡å¸ƒå±€éœ€è¦é‡æ–°æ„å»º</span></span><br><span class="line">        StartCoroutine(DelayedSetDirty(rectTransform));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åç¨‹DelayedSetDirty:ç­‰å¾…ä¸€å¸§ä¹‹åå†é€šè¿‡LayoutRebuilder.MarkLayoutForRebuildæ¥æ ‡è®°å½“å‰å¯¹è±¡çš„å¸ƒå±€éœ€è¦é‡æ–°æ„å»ºã€‚å¯ä»¥ä½¿ç”¨LayoutRebuilder.ForceRebuildLayoutImmediate(rectTransform)æ–¹æ³•å¼ºåˆ¶æ›´æ–°å¸ƒå±€ã€‚</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">IEnumerator <span class="title">DelayedSetDirty</span>(<span class="params">RectTransform rectTransform</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    LayoutRebuilder.MarkLayoutForRebuild(rectTransform);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>å­å¸ƒå±€å…ƒç´ çš„å¯¹é½æ–¹å¼</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">SerializeField</span>] <span class="keyword">protected</span> TextAnchor m_ChildAlignment = TextAnchor.UpperLeft;</span><br><span class="line"><span class="comment">// å¸ƒå±€ç»„ä¸­å­å¸ƒå±€å…ƒç´ çš„å¯¹é½æ–¹å¼ã€‚é»˜è®¤æ˜¯å·¦ä¸Šè§’å¯¹é½ã€‚</span></span><br><span class="line"><span class="keyword">public</span> TextAnchor childAlignment &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> m_ChildAlignment; &#125; <span class="keyword">set</span> &#123; SetProperty(<span class="keyword">ref</span> m_ChildAlignment, <span class="keyword">value</span>); &#125; &#125;</span><br></pre></td></tr></table></figure><blockquote><p>è·å–æ­¤å¸ƒå±€å…ƒç´ çš„RectTransformç»„ä»¶</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">System.NonSerialized</span>] <span class="keyword">private</span> RectTransform m_Rect;</span><br><span class="line"><span class="keyword">protected</span> RectTransform rectTransform</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">get</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (m_Rect == <span class="literal">null</span>)</span><br><span class="line">            m_Rect = GetComponent&lt;RectTransform&gt;();</span><br><span class="line">        <span class="keyword">return</span> m_Rect;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å­˜å‚¨å¸ƒå±€ç»„ä¸­æ‰€æœ‰çš„å­å¸ƒå±€å…ƒç´ </p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">System.NonSerialized</span>] <span class="keyword">private</span> List&lt;RectTransform&gt; m_RectChildren = <span class="keyword">new</span> List&lt;RectTransform&gt;();</span><br><span class="line"><span class="keyword">protected</span> List&lt;RectTransform&gt; rectChildren &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> m_RectChildren; &#125; &#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä¸€äº›å…¶ä»–å±æ€§å’Œå­—æ®µ</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DrivenRectTransformTracker æ˜¯ Unity æä¾›çš„ä¸€ä¸ªç”¨äºè·Ÿè¸ª RectTransform å°ºå¯¸å’Œä½ç½®çš„å·¥å…·ç±»ã€‚ç¡®ä¿å¸ƒå±€å¯ä»¥åœ¨å°ºå¯¸æˆ–ä½ç½®å˜åŒ–æ—¶å¾—åˆ°æ›´æ–°ã€‚</span></span><br><span class="line"><span class="keyword">protected</span> DrivenRectTransformTracker m_Tracker;</span><br><span class="line"><span class="comment">// m_TotalMinSize ç”¨æ¥è®°å½•å½“å‰å¸ƒå±€æ‰€éœ€çš„æœ€å°å°ºå¯¸ã€‚åˆå§‹å€¼è®¾ä¸º Vector2.zeroï¼Œå³æ²¡æœ‰æœ€å°å°ºå¯¸è¦æ±‚ã€‚</span></span><br><span class="line"><span class="keyword">private</span> Vector2 m_TotalMinSize = Vector2.zero;</span><br><span class="line"><span class="comment">// m_TotalPreferredSize ç”¨æ¥è®°å½•å½“å‰å¸ƒå±€æ‰€éœ€çš„é¦–é€‰å°ºå¯¸ã€‚åˆå§‹ä¸º Vector2.zeroï¼Œå³æ²¡æœ‰é¦–é€‰å°ºå¯¸è¦æ±‚ã€‚</span></span><br><span class="line"><span class="keyword">private</span> Vector2 m_TotalPreferredSize = Vector2.zero;</span><br><span class="line"><span class="comment">// m_TotalFlexibleSize ç”¨æ¥è®°å½•å½“å‰å¸ƒå±€æ‰€éœ€çš„çµæ´»å°ºå¯¸ï¼ˆå³å¯å˜å°ºå¯¸ï¼‰ã€‚åˆå§‹å€¼è®¾ä¸º Vector2.zeroï¼Œè¡¨ç¤ºæ²¡æœ‰çµæ´»å°ºå¯¸çš„è¦æ±‚ã€‚</span></span><br><span class="line"><span class="keyword">private</span> Vector2 m_TotalFlexibleSize = Vector2.zero;</span><br></pre></td></tr></table></figure><blockquote><p>CalculateLayoutInputHorizontalï¼šå®ç°ILayoutElementä¸­çš„æ¥å£ï¼Œå­ç±»å¯é‡å†™</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">CalculateLayoutInputHorizontal</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æ¸…ç©ºå½“å‰å­å¸ƒå±€å…ƒç´ å®¹å™¨</span></span><br><span class="line">    m_RectChildren.Clear();</span><br><span class="line">    <span class="comment">// ä½¿ç”¨å¯¹è±¡æ± è·å–ä¸€ä¸ªä¸´æ—¶çš„ListPool&lt;Component&gt;å®¹å™¨</span></span><br><span class="line">    <span class="keyword">var</span> toIgnoreList = ListPool&lt;Component&gt;.Get();</span><br><span class="line">    <span class="comment">// è¿‡æ»¤ä¸å‚ä¸å¸ƒå±€çš„å­å¸ƒå±€å…ƒç´ </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; rectTransform.childCount; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> rect = rectTransform.GetChild(i) <span class="keyword">as</span> RectTransform;</span><br><span class="line">        <span class="comment">// æ²¡æœ‰RectTransformç»„ä»¶å’Œåœ¨Hierarchyä¸­æ²¡æœ‰è¢«æ¿€æ´»åˆ™è·³è¿‡</span></span><br><span class="line">        <span class="keyword">if</span> (rect == <span class="literal">null</span> || !rect.gameObject.activeInHierarchy)</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–é™„åŠ åœ¨å­å¸ƒå±€å…ƒç´ ç»„ä»¶çš„æ‰€æœ‰ILayoutIgnorerç»„ä»¶å¯¹è±¡</span></span><br><span class="line">        rect.GetComponents(<span class="keyword">typeof</span>(ILayoutIgnorer), toIgnoreList);</span><br><span class="line"><span class="comment">// å¦‚æœä¸ºç©ºï¼Œåˆ™ä»£è¡¨éœ€è¦å‚ä¸å¸ƒå±€</span></span><br><span class="line">        <span class="keyword">if</span> (toIgnoreList.Count == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            m_RectChildren.Add(rect);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åªè¦å­˜åœ¨ä¸€ä¸ªä¸ºfalseçš„ILayoutIgnorerç»„ä»¶ï¼Œåˆ™éœ€è¦å‚ä¸å¸ƒå±€</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> j = <span class="number">0</span>; j &lt; toIgnoreList.Count; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">var</span> ignorer = (ILayoutIgnorer)toIgnoreList[j];</span><br><span class="line">            <span class="keyword">if</span> (!ignorer.ignoreLayout)</span><br><span class="line">            &#123;</span><br><span class="line">                m_RectChildren.Add(rect);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é‡Šæ”¾toIgnoreListè¿”å›å¯¹è±¡æ± </span></span><br><span class="line">    ListPool&lt;Component&gt;.Release(toIgnoreList);</span><br><span class="line">    <span class="comment">// æ¸…ç©ºå¸ƒå±€è¿½è¸ªå™¨</span></span><br><span class="line">    m_Tracker.Clear();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æŠ½è±¡æ–¹æ³•CalculateLayoutInputVerticalè®¡ç®—å‚ç›´å¸ƒå±€è¾“å…¥ï¼Œå­ç±»å¿…é¡»å®ç°</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">CalculateLayoutInputVertical</span>()</span>;</span><br></pre></td></tr></table></figure><blockquote><p>GetTotalMinSizeï¼šç”±å­ç±»è°ƒç”¨ç»™å®šè½´ä¸Šå¸ƒå±€ç»„çš„æœ€å°å¤§å°</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è½´ç´¢å¼•ã€‚0è¡¨ç¤ºæ°´å¹³ï¼Œ1è¡¨ç¤ºå‚ç›´ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="built_in">float</span> <span class="title">GetTotalMinSize</span>(<span class="params"><span class="built_in">int</span> axis</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> m_TotalMinSize[axis];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>GetTotalPreferredSize</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// // è½´ç´¢å¼•ã€‚0è¡¨ç¤ºæ°´å¹³ï¼Œ1è¡¨ç¤ºå‚ç›´ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="built_in">float</span> <span class="title">GetTotalPreferredSize</span>(<span class="params"><span class="built_in">int</span> axis</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> m_TotalPreferredSize[axis];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>GetTotalFlexibleSizeï¼šç”±å­ç±»è°ƒç”¨ç»™å®šè½´ä¸Šå¸ƒå±€ç»„çš„çµæ´»å¤§å°ã€‚</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// // è½´ç´¢å¼•ã€‚0è¡¨ç¤ºæ°´å¹³ï¼Œ1è¡¨ç¤ºå‚ç›´ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="built_in">float</span> <span class="title">GetTotalFlexibleSize</span>(<span class="params"><span class="built_in">int</span> axis</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> m_TotalFlexibleSize[axis];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ILayoutControllerä¸­çš„æ¥å£ï¼ŒæŠ½è±¡æ–¹æ³•ï¼Œå­ç±»å¿…é¡»å®ç°çš„å›è°ƒ</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">SetLayoutHorizontal</span>()</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">SetLayoutVertical</span>()</span>;</span><br></pre></td></tr></table></figure><blockquote><p>æ„é€ æ–¹æ³•</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="title">LayoutGroup</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (m_Padding == <span class="literal">null</span>)</span><br><span class="line">        m_Padding = <span class="keyword">new</span> RectOffset();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç”Ÿå‘½å‘¨æœŸOnEnableï¼šå¯ç”¨æ—¶ï¼Œæ ‡è®°ä¸ºéœ€è¦è¿›è¡Œå¸ƒå±€é‡å»º</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnEnable</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">base</span>.OnEnable();</span><br><span class="line">    SetDirty();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç”Ÿå‘½å‘¨æœŸOnDisableï¼šå¤±æ´»æ—¶ï¼Œæ¸…ç©ºå¸ƒå±€è¿½è¸ªå™¨ï¼Œå¼ºåˆ¶æ›´æ–°å¸ƒå±€</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnDisable</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    m_Tracker.Clear();</span><br><span class="line">    LayoutRebuilder.MarkLayoutForRebuild(rectTransform);</span><br><span class="line">    <span class="keyword">base</span>.OnDisable();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>OnDidApplyAnimationPropertiesï¼šå½“åŠ¨ç”»å±æ€§æ”¹å˜æ—¶ï¼Œæ ‡è®°ä¸ºéœ€è¦è¿›è¡Œå¸ƒå±€é‡å»º</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnDidApplyAnimationProperties</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">SetDirty();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>OnRectTransformDimensionsChangeï¼šå½“åŠ¨ç”»å±æ€§æ”¹å˜æ—¶ï¼Œæ ‡è®°ä¸ºéœ€è¦è¿›è¡Œå¸ƒå±€é‡å»º</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnDidApplyAnimationProperties</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">SetDirty();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>GetStartOffsetï¼šæ ¹æ®ç»™å®šè½´å’Œå¯¹é½æ–¹å¼è®¡ç®—ç¬¬ä¸€ä¸ªå­å¸ƒå±€å…ƒç´ èµ·å§‹åç§»åæ ‡ï¼Œç”±å­ç±»è°ƒç”¨ã€‚</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è½´ç´¢å¼•ã€‚0è¡¨ç¤ºæ°´å¹³ï¼Œ1è¡¨ç¤ºå‚ç›´</span></span><br><span class="line"><span class="comment">// æ‰€æœ‰å¸ƒå±€å…ƒç´ åœ¨ç»™å®šè½´ä¸Šæ‰€éœ€çš„æ€»ç©ºé—´ï¼ŒåŒ…æ‹¬é—´è·å’Œä¸åŒ…æ‹¬å¡«å……ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="built_in">float</span> <span class="title">GetStartOffset</span>(<span class="params"><span class="built_in">int</span> axis, <span class="built_in">float</span> requiredSpaceWithoutPadding</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// è®¡ç®—å®é™…éœ€è¦çš„ç©ºé—´å¤§å°ã€‚å®ƒç­‰äº requiredSpaceWithoutPadding åŠ ä¸Šè½´å‘ä¸Šçš„å¡«å……å€¼ï¼Œæ ¹æ® axis çš„å€¼æ¥å†³å®šä½¿ç”¨æ°´å¹³å¡«å……æˆ–å‚ç›´å¡«å……ã€‚</span></span><br><span class="line">    <span class="built_in">float</span> requiredSpace = requiredSpaceWithoutPadding + (axis == <span class="number">0</span> ? padding.horizontal : padding.vertical);</span><br><span class="line">    <span class="comment">// è·å–å½“å‰è½´ä¸Šå¯ç”¨çš„ç©ºé—´å¤§å°ï¼Œé€šè¿‡æŸ¥è¯¢ rectTransform.rect.size[axis] å¾—åˆ°ã€‚</span></span><br><span class="line">    <span class="built_in">float</span> availableSpace = rectTransform.rect.size[axis];</span><br><span class="line">    <span class="comment">// è®¡ç®—å‰©ä½™çš„ç©ºé—´å¤§å°ï¼Œå³ availableSpace å‡å» requiredSpaceã€‚</span></span><br><span class="line">    <span class="built_in">float</span> surplusSpace = availableSpace - requiredSpace;</span><br><span class="line">    <span class="comment">// è°ƒç”¨ GetAlignmentOnAxis(axis) æ–¹æ³•ï¼Œè·å–åœ¨å½“å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼æˆ–æ¯”ä¾‹å› å­ã€‚</span></span><br><span class="line">    <span class="built_in">float</span> alignmentOnAxis = GetAlignmentOnAxis(axis);</span><br><span class="line">    <span class="comment">// å¦‚æœ axis æ˜¯ 0ï¼ˆæ°´å¹³è½´ï¼‰ï¼Œåˆ™è¿”å›æ°´å¹³å¡«å……çš„å·¦è¾¹è· padding.left åŠ ä¸Šå‰©ä½™ç©ºé—´ä¹˜ä»¥è½´å‘çš„å¯¹é½æ–¹å¼ã€‚</span></span><br><span class="line"><span class="comment">// å¦‚æœ axis æ˜¯ 1ï¼ˆå‚ç›´è½´ï¼‰ï¼Œåˆ™è¿”å›å‚ç›´å¡«å……çš„é¡¶è¾¹è· padding.top åŠ ä¸Šå‰©ä½™ç©ºé—´ä¹˜ä»¥è½´å‘çš„å¯¹é½æ–¹å¼ã€‚</span></span><br><span class="line">    <span class="keyword">return</span> (axis == <span class="number">0</span> ? padding.left : padding.top) + surplusSpace * alignmentOnAxis;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>GetAlignmentOnAxisï¼šä»¥åˆ†æ•°å½¢å¼è¿”å›æŒ‡å®šè½´ä¸Šçš„å¯¹é½æ–¹å¼ï¼Œå…¶ä¸­0ä¸ºå·¦/ä¸Šï¼Œ0.5ä¸ºä¸­ï¼Œ1ä¸ºå³/ä¸‹ã€‚</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 0è¡¨ç¤ºæ°´å¹³ï¼Œ1è¡¨ç¤ºå‚ç›´</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="built_in">float</span> <span class="title">GetAlignmentOnAxis</span>(<span class="params"><span class="built_in">int</span> axis</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (axis == <span class="number">0</span>)</span><br><span class="line">        <span class="comment">// æ°´å¹³è½´ï¼šå­å¸ƒå±€å…ƒç´ çš„å¯¹é½æ–¹å¼è¿›è¡Œæ¨¡3è¿ç®—ï¼Œå¾—åˆ°ä¸€ä¸ªèŒƒå›´åœ¨0~2ä¹‹é—´çš„æ•´æ•°ï¼Œè¿™ä¸ªå€¼ä¹˜ä»¥0.5f,å¾—åˆ°ä¸€ä¸ªåœ¨0.0f~1.0fä¹‹é—´çš„æµ®ç‚¹æ•°ä½œä¸ºæ°´å¹³å¯¹é½çš„æ¯”ä¾‹å› å­</span></span><br><span class="line">        <span class="keyword">return</span> ((<span class="built_in">int</span>)childAlignment % <span class="number">3</span>) * <span class="number">0.5f</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="comment">// å‚ç›´è½´ï¼šå­å¸ƒå±€å…ƒç´ çš„å¯¹é½æ–¹å¼è¿›è¡Œé™¤3è¿ç®—ï¼Œå¾—åˆ°ä¸€ä¸ªèŒƒå›´åœ¨0~2ä¹‹é—´çš„æ•´æ•°ï¼Œè¿™ä¸ªå€¼ä¹˜ä»¥0.5f,å¾—åˆ°ä¸€ä¸ªåœ¨0.0f~1.0fä¹‹é—´çš„æµ®ç‚¹æ•°ä½œä¸ºå‚ç›´å¯¹é½çš„æ¯”ä¾‹å› å­</span></span><br><span class="line">        <span class="keyword">return</span> ((<span class="built_in">int</span>)childAlignment / <span class="number">3</span>) * <span class="number">0.5f</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>SetLayoutInputForAxisï¼šç”¨äºè®¾ç½®ç»™å®šè½´çš„è®¡ç®—å¸ƒå±€å±æ€§ã€‚ç”±å­ç±»è°ƒç”¨ã€‚</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 0è¡¨ç¤ºæ°´å¹³ï¼Œ1è¡¨ç¤ºå‚ç›´ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">SetLayoutInputForAxis</span>(<span class="params"><span class="built_in">float</span> totalMin, <span class="built_in">float</span> totalPreferred, <span class="built_in">float</span> totalFlexible, <span class="built_in">int</span> axis</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    m_TotalMinSize[axis] = totalMin;</span><br><span class="line">    m_TotalPreferredSize[axis] = totalPreferred;</span><br><span class="line">    m_TotalFlexibleSize[axis] = totalFlexible;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>SetChildAlongAxisï¼šè®¾ç½®å­å¸ƒå±€å…ƒç´ æ²¿ç»™å®šè½´çš„ä½ç½®å’Œå¤§å°ã€‚</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 0è¡¨ç¤ºæ°´å¹³ï¼Œ1è¡¨ç¤ºå‚ç›´ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">SetChildAlongAxis</span>(<span class="params">RectTransform rect, <span class="built_in">int</span> axis, <span class="built_in">float</span> pos</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (rect == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    SetChildAlongAxisWithScale(rect, axis, pos, <span class="number">1.0f</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>SetChildAlongAxisWithScaleï¼šè®¾ç½®å­å¸ƒå±€å…ƒç´ æ²¿ç»™å®šè½´çš„ä½ç½®å’Œå¤§å°ã€‚</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 0è¡¨ç¤ºæ°´å¹³ï¼Œ1è¡¨ç¤ºå‚ç›´ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">SetChildAlongAxisWithScale</span>(<span class="params">RectTransform rect, <span class="built_in">int</span> axis, <span class="built_in">float</span> pos, <span class="built_in">float</span> scaleFactor</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (rect == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line"><span class="comment">// è·Ÿè¸ªé”šç‚¹å’Œé”šå®šä½ç½®ï¼ˆAnchors å’Œ AnchoredPositionX æˆ– AnchoredPositionYï¼‰çš„å˜åŒ–</span></span><br><span class="line">    m_Tracker.Add(<span class="keyword">this</span>, rect,</span><br><span class="line">        DrivenTransformProperties.Anchors |</span><br><span class="line">        (axis == <span class="number">0</span> ? DrivenTransformProperties.AnchoredPositionX : DrivenTransformProperties.AnchoredPositionY));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å†…è”rect.SetInsetAndSizeFromParentEdge(â€¦)å’Œé‡æ„ä»£ç ï¼Œä»¥ä¹˜ä»¥æ‰€éœ€çš„å¤§å°scaleFactorã€‚</span></span><br><span class="line"><span class="comment">// sizeDeltaå¿…é¡»ä¿æŒä¸å˜ï¼Œä½†ä½ç½®è®¡ç®—ä¸­ä½¿ç”¨çš„å¤§å°å¿…é¡»é€šè¿‡scaleFactorè¿›è¡Œç¼©æ”¾ã€‚</span></span><br><span class="line"><span class="comment">// è®¾ç½®å­å…ƒç´ çš„ anchorMin å’Œ anchorMax ä¸º Vector2.upï¼Œå³å®Œå…¨æ²¿çˆ¶å…ƒç´ çš„é¡¶éƒ¨è¾¹ç¼˜å¯¹é½ã€‚</span></span><br><span class="line">    rect.anchorMin = Vector2.up;</span><br><span class="line">    rect.anchorMax = Vector2.up;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯¹äºæ°´å¹³è½´ï¼ˆaxis == 0ï¼‰ï¼šè®¡ç®—å…¬å¼ä¸º pos + rect.sizeDelta[axis] * rect.pivot[axis] * scaleFactorã€‚è¿™å°†æ ¹æ®ä½ç½® posã€å­å…ƒç´ çš„å°ºå¯¸ rect.sizeDelta[axis]ã€å­å…ƒç´ çš„ä¸­å¿ƒç‚¹ rect.pivot[axis] å’Œç¼©æ”¾å› å­ scaleFactor è®¾ç½®å­å…ƒç´ çš„ä½ç½®ã€‚</span></span><br><span class="line">    <span class="comment">// å¯¹äºå‚ç›´è½´ï¼ˆaxis == 1ï¼‰ï¼šè®¡ç®—å…¬å¼ä¸º -pos - rect.sizeDelta[axis] * (1f - rect.pivot[axis]) * scaleFactorã€‚è¿™åŒæ ·æ ¹æ®ä½ç½® posã€å­å…ƒç´ çš„å°ºå¯¸ rect.sizeDelta[axis]ã€å­å…ƒç´ çš„ä¸­å¿ƒç‚¹ rect.pivot[axis] å’Œç¼©æ”¾å› å­ scaleFactor è®¾ç½®å­å…ƒç´ çš„ä½ç½®ã€‚</span></span><br><span class="line">    Vector2 anchoredPosition = rect.anchoredPosition;</span><br><span class="line">    anchoredPosition[axis] = (axis == <span class="number">0</span>) ? (pos + rect.sizeDelta[axis] * rect.pivot[axis] * scaleFactor) : (-pos - rect.sizeDelta[axis] * (<span class="number">1f</span> - rect.pivot[axis]) * scaleFactor);</span><br><span class="line">    <span class="comment">// å°†è®¡ç®—å¾—åˆ°çš„ä½ç½®åº”ç”¨åˆ°å­å…ƒç´ çš„ anchoredPosition ä¸Šï¼Œç¡®ä¿å­å…ƒç´ æŒ‰é¢„æœŸä½ç½®æ”¾ç½®</span></span><br><span class="line">    rect.anchoredPosition = anchoredPosition;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>SetChildAlongAxisï¼šä¸Šé¢æ–¹æ³•çš„é‡è½½ï¼Œå¤šäº†ä¸€ä¸ªå‚æ•°sizeï¼Œå­å¸ƒå±€å…ƒç´ çš„å°ºå¯¸å¤§å°</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">SetChildAlongAxis</span>(<span class="params">RectTransform rect, <span class="built_in">int</span> axis, <span class="built_in">float</span> pos, <span class="built_in">float</span> size</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (rect == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    SetChildAlongAxisWithScale(rect, axis, pos, size, <span class="number">1.0f</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>SetChildAlongAxisWithScaleï¼šä¸Šé¢æ–¹æ³•çš„é‡è½½ï¼Œå¤šäº†ä¸€ä¸ªå‚æ•°sizeï¼Œå­å¸ƒå±€å…ƒç´ çš„å°ºå¯¸å¤§å°</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">SetChildAlongAxisWithScale</span>(<span class="params">RectTransform rect, <span class="built_in">int</span> axis, <span class="built_in">float</span> pos, <span class="built_in">float</span> size, <span class="built_in">float</span> scaleFactor</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (rect == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·Ÿè¸ªé”šç‚¹å’Œé”šå®šä½ç½®çš„å˜åŒ–ï¼Œä»¥åŠæ ¹æ®è½´çš„ä¸åŒè¿½è¸ª AnchoredPositionX æˆ– AnchoredPositionY å’Œå¯¹åº”çš„ SizeDeltaX æˆ– SizeDeltaYã€‚</span></span><br><span class="line">    m_Tracker.Add(<span class="keyword">this</span>, rect,</span><br><span class="line">        DrivenTransformProperties.Anchors |</span><br><span class="line">        (axis == <span class="number">0</span> ?</span><br><span class="line">            (DrivenTransformProperties.AnchoredPositionX | DrivenTransformProperties.SizeDeltaX) :</span><br><span class="line">            (DrivenTransformProperties.AnchoredPositionY | DrivenTransformProperties.SizeDeltaY)</span><br><span class="line">        )</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®å­å…ƒç´ çš„ anchorMin å’Œ anchorMax ä¸º Vector2.upï¼Œå³å®Œå…¨æ²¿çˆ¶å…ƒç´ çš„é¡¶éƒ¨è¾¹ç¼˜å¯¹é½</span></span><br><span class="line">    rect.anchorMin = Vector2.up;</span><br><span class="line">    rect.anchorMax = Vector2.up;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°å­å…ƒç´ çš„ sizeDeltaï¼Œå°†æŒ‡å®šè½´ä¸Šçš„å°ºå¯¸è®¾ç½®ä¸ºä¼ å…¥çš„ size å€¼ï¼Œç¡®ä¿å­å…ƒç´ åœ¨è¯¥è½´ä¸Šå…·æœ‰æ­£ç¡®çš„å¤§å°</span></span><br><span class="line">    Vector2 sizeDelta = rect.sizeDelta;</span><br><span class="line">    sizeDelta[axis] = size;</span><br><span class="line">    rect.sizeDelta = sizeDelta;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯¹äºæ°´å¹³è½´ï¼ˆaxis == 0ï¼‰ï¼šè®¡ç®—å…¬å¼ä¸º pos + size * rect.pivot[axis] * scaleFactorã€‚è¿™å°†æ ¹æ®ä½ç½® posã€å­å…ƒç´ çš„å°ºå¯¸ sizeã€å­å…ƒç´ çš„ä¸­å¿ƒç‚¹ rect.pivot[axis] å’Œç¼©æ”¾å› å­ scaleFactor è®¾ç½®å­å…ƒç´ çš„ä½ç½®ã€‚</span></span><br><span class="line">    <span class="comment">// å¯¹äºå‚ç›´è½´ï¼ˆaxis == 1ï¼‰ï¼šè®¡ç®—å…¬å¼ä¸º -pos - size * (1f - rect.pivot[axis]) * scaleFactorã€‚è¿™åŒæ ·æ ¹æ®ä½ç½® posã€å­å…ƒç´ çš„å°ºå¯¸ sizeã€å­å…ƒç´ çš„ä¸­å¿ƒç‚¹ rect.pivot[axis] å’Œç¼©æ”¾å› å­ scaleFactor è®¾ç½®å­å…ƒç´ çš„ä½ç½®ã€‚</span></span><br><span class="line">    Vector2 anchoredPosition = rect.anchoredPosition;</span><br><span class="line">    anchoredPosition[axis] = (axis == <span class="number">0</span>) ? (pos + size * rect.pivot[axis] * scaleFactor) : (-pos - size * (<span class="number">1f</span> - rect.pivot[axis]) * scaleFactor);</span><br><span class="line">    <span class="comment">// å°†è®¡ç®—å¾—åˆ°çš„ä½ç½®åº”ç”¨åˆ°å­å…ƒç´ çš„ anchoredPosition ä¸Šï¼Œç¡®ä¿å­å…ƒç´ æŒ‰é¢„æœŸä½ç½®æ”¾ç½®</span></span><br><span class="line">    rect.anchoredPosition = anchoredPosition;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>isRootLayoutGroupï¼šåˆ¤æ–­å½“å‰å¯¹è±¡æ˜¯å¦æ˜¯å¸ƒå±€ç»„çš„æ ¹å¸ƒå±€å¯¹è±¡ç»„ä»¶ã€‚</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">bool</span> isRootLayoutGroup</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">get</span></span><br><span class="line">    &#123;</span><br><span class="line">        Transform parent = transform.parent;</span><br><span class="line">        <span class="keyword">if</span> (parent == <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">return</span> transform.parent.GetComponent(<span class="keyword">typeof</span>(ILayoutGroup)) == <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>OnRectTransformDimensionsChangeï¼šå¦‚æœå½“å‰å¯¹è±¡æ˜¯æ ¹å¸ƒå±€å¯¹è±¡ï¼Œä¸”RectTransformå‘ç”Ÿäº†å˜åŒ–ï¼Œåˆ™æ ‡è®°ä¸ºéœ€è¦è¿›è¡Œå¸ƒå±€é‡å»º</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnRectTransformDimensionsChange</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">base</span>.OnRectTransformDimensionsChange();</span><br><span class="line">    <span class="keyword">if</span> (isRootLayoutGroup)</span><br><span class="line">        SetDirty();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>OnTransformChildrenChangedï¼šå­å¸ƒå±€å…ƒç´ å¦‚æœçš„Transformå¦‚æœå‘ç”Ÿæ”¹å˜åˆ™æ ‡è®°ä¸ºéœ€è¦è¿›è¡Œå¸ƒå±€é‡å»º</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnTransformChildrenChanged</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    SetDirty();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨ç¼–è¾‘å™¨æ¨¡å¼ä¸‹ï¼Œæ¯æ¬¡å¯¹è¯¥ç»„ä»¶çš„å±æ€§è¿›è¡Œä¿®æ”¹å¹¶ä¿å­˜æ—¶è‡ªåŠ¨è°ƒç”¨OnValidateæ–¹æ³•ï¼Œæ ‡è®°ä¸ºéœ€è¦è¿›è¡Œå¸ƒå±€é‡å»º</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">if</span> UNITY_EDITOR</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnValidate</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        SetDirty();</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">LayoutGroupæ˜¯æ§åˆ¶å­å¸ƒå±€å¯¹è±¡ç»„ä»¶çš„åŸºç±»ï¼Œå®ç°äº†ILayoutElementå’ŒILayoutGroupæ¥å£ï¼Œè¯´æ˜å®ƒæ—¢æ˜¯ä¸€ä¸ªå¸ƒå±€å…ƒç´ ä¹Ÿæ˜¯ä¸€ä¸ªå¸ƒå±€æ§åˆ¶å™¨ï¼ŒHorizontalLayoutGroupã€VerticalLayoutGroupã€GridLayoutGroupéƒ½ç»§æ‰¿æˆ–é—´æ¥ç»§æ‰¿äº†æ­¤ç±»ã€‚</summary>
    
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/categories/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/tags/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>UGUIæºç è§£æâ€”â€”ILayoutIgnorer</title>
    <link href="https://azzurebubble.github.io/posts/4c1d55d0.html"/>
    <id>https://azzurebubble.github.io/posts/4c1d55d0.html</id>
    <published>2024-07-20T07:09:24.000Z</published>
    <updated>2024-07-20T09:05:24.054Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ILayoutIgnorerï¼šæŒ‚è½½äº†å®ç°ILayoutIgnoreræ¥å£çš„ç»„ä»¶çš„å¯¹è±¡å¯ä»¥è®¾ç½®ä¸å—å¸ƒå±€ç³»ç»Ÿæ§åˆ¶ï¼Œä¾‹å¦‚LayoutElementã€‚<br><font color=red>å®ç°ILayoutIgnoreræ¥å£çš„ç»„ä»¶çš„ä½œç”¨æ˜¯é’ˆå¯¹äºå¸ƒå±€ç»„ä¸‹çš„å­å¯¹è±¡ï¼Œè€Œä¸æ˜¯é’ˆå¯¹äºè‡ªèº«ï¼Œä¾‹å¦‚ç»™æŒ‚è½½äº†ContentSizeFitterç»„ä»¶çš„å¯¹è±¡èº«ä¸ŠæŒ‚è½½LayoutElementç»„ä»¶å¹¶å°†ignoreLayoutè®¾ç½®ä¸ºtrueæ˜¯æ²¡æœ‰ä½œç”¨çš„</font></p></blockquote><h4 id="æºç è§£æ">æºç è§£æ</h4><blockquote><p>ignoreLayoutï¼šè¿”å›è¿™ä¸ªå¸ƒå±€å…ƒç´ çš„RecTransformæ˜¯å¦åº”è¯¥è¢«å¸ƒå±€ç³»ç»Ÿå¿½ç•¥ã€‚</p><p><font color=red>æ³¨æ„ï¼šéœ€è¦å¯¹è±¡èº«ä¸Šæ‰€æœ‰æŒ‚è½½äº†ILayoutIgnorerç»„ä»¶ä¸­çš„ignoreLayoutéƒ½ä¸ºtrueçš„æ—¶å€™æ‰ä¼šä¸å—åˆ°å¸ƒå±€ç³»ç»Ÿæ§åˆ¶</font></p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> ignoreLayout &#123; <span class="keyword">get</span>; &#125;</span><br></pre></td></tr></table></figure><blockquote><p><font color=red>å› ä¸ºåªæœ‰åœ¨LayoutGroupç±»ä¸­å¼•ç”¨äº†ILayoutIngnoreræ¥å£ï¼ŒLayoutGroupç±»æ˜¯åªä½œç”¨ä¸å­å¸ƒå±€å…ƒç´ çš„ï¼Œæ‰€ä»¥å®ç°äº†ILayoutIgnoreræ¥å£çš„ç»„ä»¶çš„ä½œç”¨æ˜¯é’ˆå¯¹äºå¸ƒå±€ç»„ä¸‹çš„å­å¯¹è±¡ï¼Œè€Œä¸æ˜¯è‡ªèº«ã€‚</font></p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">CalculateLayoutInputHorizontal</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    m_RectChildren.Clear();</span><br><span class="line">    <span class="keyword">var</span> toIgnoreList = ListPool&lt;Component&gt;.Get();</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; rectTransform.childCount; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> rect = rectTransform.GetChild(i) <span class="keyword">as</span> RectTransform;</span><br><span class="line">        <span class="keyword">if</span> (rect == <span class="literal">null</span> || !rect.gameObject.activeInHierarchy)</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">        rect.GetComponents(<span class="keyword">typeof</span>(ILayoutIgnorer), toIgnoreList);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (toIgnoreList.Count == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            m_RectChildren.Add(rect);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> j = <span class="number">0</span>; j &lt; toIgnoreList.Count; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">var</span> ignorer = (ILayoutIgnorer)toIgnoreList[j];</span><br><span class="line">            <span class="keyword">if</span> (!ignorer.ignoreLayout)</span><br><span class="line">            &#123;</span><br><span class="line">                m_RectChildren.Add(rect);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ListPool&lt;Component&gt;.Release(toIgnoreList);</span><br><span class="line">    m_Tracker.Clear();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æŒ‚è½½äº†å®ç°ILayoutIgnoreræ¥å£çš„ç»„ä»¶å¯¹è±¡å¯ä»¥è®¾ç½®ä¸å—å¸ƒå±€ç³»ç»Ÿæ§åˆ¶ï¼Œä¾‹å¦‚ï¼šLayoutElement</summary>
    
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/categories/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/tags/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>UGUIæºç è§£æâ€”â€”ILayoutSelfController</title>
    <link href="https://azzurebubble.github.io/posts/8ae908f0.html"/>
    <id>https://azzurebubble.github.io/posts/8ae908f0.html</id>
    <published>2024-07-20T07:09:15.000Z</published>
    <updated>2024-07-20T09:05:24.052Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ILayoutSelfControllerï¼šç»§æ‰¿è‡ªILayoutController(å¸ƒå±€æ§åˆ¶å™¨)ï¼ŒæŒ‚è½½äº†å®ç°ILayoutSelfControllerçš„ç»„ä»¶çš„å¯¹è±¡è¢«è§†ä¸ºä¸€ä¸ªå¸ƒå±€æ§åˆ¶å™¨ï¼Œç”¨äºæ§åˆ¶è‡ªèº«å¸ƒå±€å¯¹è±¡ï¼Œä¾‹å¦‚ï¼šContentSizeFitterã€AspectRatioFitterã€‚</p></blockquote><h4 id="æºç è§£æ">æºç è§£æ</h4><blockquote><p>ç»§æ‰¿è‡ªILayoutControllerï¼Œç”¨äºé©±åŠ¨è‡ªèº«çš„RectTransformï¼Œè°ƒç”¨ <code>ILayoutController.SetLayoutHorizontal</code> å¤„ç†æ°´å¹³å¸ƒå±€éƒ¨åˆ†ï¼Œè°ƒç”¨ <code>ILayoutController.SetLayoutVertical</code> å¤„ç†å‚ç›´å¸ƒå±€éƒ¨åˆ†ã€‚å¯ä»¥æ”¹å˜ RectTransform çš„é«˜åº¦ã€å®½åº¦ã€ä½ç½®å’Œæ—‹è½¬ã€‚</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">ILayoutSelfController</span> : <span class="title">ILayoutController</span></span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ç»§æ‰¿è‡ªILayoutController(å¸ƒå±€æ§åˆ¶å™¨)ï¼ŒæŒ‚è½½äº†å®ç°ILayoutSelfControllerçš„ç»„ä»¶çš„å¯¹è±¡è¢«è§†ä¸ºä¸€ä¸ªå¸ƒå±€æ§åˆ¶å™¨ï¼Œç”¨äºæ§åˆ¶è‡ªèº«å¸ƒå±€å¯¹è±¡ï¼Œä¾‹å¦‚ï¼šContentSizeFitterã€AspectRatioFitterã€‚</summary>
    
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/categories/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/tags/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>UGUIæºç è§£æâ€”â€”ILayoutGroup</title>
    <link href="https://azzurebubble.github.io/posts/16a94385.html"/>
    <id>https://azzurebubble.github.io/posts/16a94385.html</id>
    <published>2024-07-20T07:09:05.000Z</published>
    <updated>2024-07-20T09:05:24.051Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ILayoutGroupï¼šç»§æ‰¿è‡ªILayoutControllerï¼ŒæŒ‚è½½äº†å®ç°ILayoutGroupçš„ç»„ä»¶çš„å¯¹è±¡è¢«è§†ä¸ºä¸€ä¸ªå¸ƒå±€æ§åˆ¶å™¨ï¼Œç”¨äºæ§åˆ¶å­å¸ƒå±€å¯¹è±¡ï¼Œé©±åŠ¨å®ƒçš„å­å…ƒç´ çš„RectTransformsï¼Œä¾‹å¦‚ï¼šHorizontalLayoutGroupã€VerticalLayoutGroupã€GridLayoutGroupã€‚</p></blockquote><h4 id="æºç è§£æ">æºç è§£æ</h4><blockquote><p>ç»§æ‰¿è‡ªILayoutController</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">ILayoutGroup</span> : <span class="title">ILayoutController</span></span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ç»§æ‰¿è‡ªILayoutControllerï¼ŒæŒ‚è½½äº†å®ç°ILayoutGroupçš„ç»„ä»¶çš„å¯¹è±¡è¢«è§†ä¸ºä¸€ä¸ªå¸ƒå±€æ§åˆ¶å™¨ï¼Œç”¨äºæ§åˆ¶å­å¸ƒå±€å¯¹è±¡ï¼Œä¾‹å¦‚ï¼šHorizontalLayoutGroupã€VerticalLayoutGroupã€GridLayoutGroupã€‚</summary>
    
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/categories/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/tags/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>UGUIæºç è§£æâ€”â€”ILayoutController</title>
    <link href="https://azzurebubble.github.io/posts/21b56f8.html"/>
    <id>https://azzurebubble.github.io/posts/21b56f8.html</id>
    <published>2024-07-20T07:08:25.000Z</published>
    <updated>2024-07-20T09:05:24.048Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ILayoutControllerï¼šæŒ‚è½½äº†å®ç°ILayoutControllerçš„ç»„ä»¶çš„å¯¹è±¡è¢«è§†ä¸ºä¸€ä¸ªå¸ƒå±€æ§åˆ¶å™¨ï¼Œå¸ƒå±€æ§åˆ¶å™¨ç”¨äºè®¾ç½®å¸ƒå±€ã€‚å¸ƒå±€æ§åˆ¶å™¨å¯åˆ†ä¸ºä¸¤ç§ï¼šæ§åˆ¶è‡ªèº«å’Œæ§åˆ¶å­å¸ƒå±€å…ƒç´ </p></blockquote><h4 id="æºç è§£æ">æºç è§£æ</h4><blockquote><p>SetLayoutHorizontalï¼šç”±è‡ªåŠ¨å¸ƒå±€ç³»ç»Ÿè°ƒç”¨çš„å›è°ƒå‡½æ•°ï¼Œå…ˆå¤„ç†å¸ƒå±€çš„æ°´å¹³æ–¹é¢</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SetLayoutHorizontal</span>()</span>;</span><br></pre></td></tr></table></figure><blockquote><p>SetLayoutVerticalï¼šç”±è‡ªåŠ¨å¸ƒå±€ç³»ç»Ÿè°ƒç”¨çš„å›è°ƒå‡½æ•°ï¼Œå…ˆå¤„ç†å¸ƒå±€çš„å‚ç›´æ–¹é¢</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SetLayoutVertical</span>()</span>;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æŒ‚è½½äº†å®ç°ILayoutControllerçš„ç»„ä»¶çš„å¯¹è±¡è¢«è§†ä¸ºä¸€ä¸ªå¸ƒå±€æ§åˆ¶å™¨ï¼Œå¸ƒå±€æ§åˆ¶å™¨ç”¨äºè®¾ç½®å¸ƒå±€ã€‚å¸ƒå±€æ§åˆ¶å™¨å¯åˆ†ä¸ºä¸¤ç§ï¼šæ§åˆ¶è‡ªèº«å’Œæ§åˆ¶å­å¸ƒå±€å…ƒç´ ã€‚</summary>
    
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/categories/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/tags/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>UGUIæºç è§£æâ€”â€”ILayoutElement</title>
    <link href="https://azzurebubble.github.io/posts/2f5dfff6.html"/>
    <id>https://azzurebubble.github.io/posts/2f5dfff6.html</id>
    <published>2024-07-20T06:53:50.000Z</published>
    <updated>2024-07-20T09:05:24.046Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ILayoutElementï¼šæŒ‚è½½äº†å®ç°ILayoutElementæ¥å£çš„ç»„ä»¶çš„å¯¹è±¡è¢«è§†ä¸ºä¸€ä¸ªå¸ƒå±€å…ƒç´ ï¼Œ<font color=red>å¸ƒå±€å…ƒç´ ä¸ç›´æ¥è®¾ç½®å¸ƒå±€ï¼Œåªè®¡ç®—è‡ªèº«å±æ€§ï¼Œè®¾ç½®å¸ƒå±€ç”±å¸ƒå±€æ§åˆ¶å™¨è®¾ç½®</font></p></blockquote><h4 id="æºç è§£æ">æºç è§£æ</h4><blockquote><p>CalculateLayoutInputHorizontalï¼šå…ˆè®¡ç®—æ°´å¹³å¸ƒå±€çš„å±æ€§å€¼ï¼Œå½“è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œå­èŠ‚ç‚¹å·²ç»æœ‰äº†æœ€æ–°çš„æ°´å¹³å¸ƒå±€è¾“å…¥ã€‚</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CalculateLayoutInputHorizontal</span>()</span>;</span><br></pre></td></tr></table></figure><blockquote><p>CalculateLayoutInputVerticalï¼šåè®¡ç®—å‚ç›´å¸ƒå±€çš„å±æ€§å€¼ï¼Œå½“è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œå­èŠ‚ç‚¹å·²ç»æœ‰äº†æœ€æ–°çš„å‚ç›´å¸ƒå±€è¾“å…¥ã€‚</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CalculateLayoutInputVertical</span>()</span>;</span><br></pre></td></tr></table></figure><blockquote><p>minWidthï¼šæ­¤å¸ƒå±€å…ƒç´ å±æ€§åˆ†é…æœ€å°çš„å®½åº¦</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">float</span> minWidth &#123; <span class="keyword">get</span>; &#125;</span><br></pre></td></tr></table></figure><blockquote><p>preferredWidthï¼šå¦‚æœæœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼Œåº”è¯¥åˆ†é…è¿™ä¸ªå¸ƒå±€å…ƒç´ çš„é¦–é€‰å®½åº¦ï¼ŒpreferredWidthå¯ä»¥è®¾ç½®ä¸º-1æ¥ç§»é™¤å¤§å°</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">float</span> preferredWidth &#123; <span class="keyword">get</span>; &#125;</span><br></pre></td></tr></table></figure><blockquote><p>flexibleWidthï¼šå¸ƒå±€å…ƒç´ åœ¨æœ‰é¢å¤–å¯ç”¨ç©ºé—´æ—¶åº”è¯¥åˆ†é…çš„é¢å¤–ç›¸å¯¹å®½åº¦</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">float</span> flexibleWidth &#123; <span class="keyword">get</span>; &#125;</span><br></pre></td></tr></table></figure><blockquote><p>minHeightï¼šæ­¤å¸ƒå±€å…ƒç´ å±æ€§åˆ†é…æœ€å°çš„é«˜åº¦</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">float</span> minHeight &#123; <span class="keyword">get</span>; &#125;</span><br></pre></td></tr></table></figure><blockquote><p>preferredHeightï¼šå¦‚æœæœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼Œåº”è¯¥åˆ†é…è¿™ä¸ªå¸ƒå±€å…ƒç´ çš„é¦–é€‰é«˜åº¦ï¼ŒpreferredHeightå¯ä»¥è®¾ç½®ä¸º-1æ¥ç§»é™¤å¤§å°</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">float</span> preferredHeight &#123; <span class="keyword">get</span>; &#125;</span><br></pre></td></tr></table></figure><blockquote><p>flexibleHeightï¼šå¸ƒå±€å…ƒç´ åœ¨æœ‰é¢å¤–å¯ç”¨ç©ºé—´æ—¶åº”è¯¥åˆ†é…çš„é¢å¤–ç›¸å¯¹é«˜åº¦</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">float</span> flexibleHeight &#123; <span class="keyword">get</span>; &#125;</span><br></pre></td></tr></table></figure><blockquote><p>layoutPriorityï¼šè·å–è¯¥ç»„ä»¶çš„å¸ƒå±€ä¼˜å…ˆçº§ï¼Œå½“ä¸€ä¸ªæ¸¸æˆå¯¹è±¡ä¸Šçš„å¤šä¸ªç»„ä»¶å®ç°äº†ILayoutElementæ¥å£æ—¶ï¼Œç¡®å®šåˆ°åº•ç”±å“ªä¸ªç»„ä»¶æä¾›å¸ƒå±€å±æ€§ï¼Œå€¼è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼Œå°äº0çš„å€¼å°†è¢«å¿½ç•¥ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œç»„ä»¶å¯ä»¥åªé‡å†™é€‰ä¸­çš„å±æ€§ï¼Œè®©å‰©ä½™çš„å€¼ä¸º-1æˆ–å…¶ä»–å°äºé›¶çš„å€¼ã€‚</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> layoutPriority &#123; <span class="keyword">get</span>; &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æŒ‚è½½äº†å®ç°ILayoutElementçš„ç»„ä»¶çš„å¯¹è±¡è¢«è§†ä¸ºä¸€ä¸ªå¸ƒå±€å…ƒç´ ï¼Œå¸ƒå±€å…ƒç´ ä¸ç›´æ¥è®¾ç½®å¸ƒå±€ï¼Œåªè®¡ç®—è‡ªèº«å±æ€§ï¼Œè®¾ç½®å¸ƒå±€ç”±å¸ƒå±€æ§åˆ¶å™¨è®¾ç½®</summary>
    
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/categories/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/tags/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>UGUIæºç è§£æâ€”â€”LayoutRebuilder</title>
    <link href="https://azzurebubble.github.io/posts/52e926ac.html"/>
    <id>https://azzurebubble.github.io/posts/52e926ac.html</id>
    <published>2024-07-18T14:43:45.000Z</published>
    <updated>2024-07-20T06:47:09.980Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>LayoutRebuilderï¼šç”¨äºç®¡ç†CanvasElementå¸ƒå±€é‡å»ºçš„åŒ…è£…ç±»ï¼Œä¸»è¦è´Ÿè´£å¸ƒå±€çš„åˆ·æ–°(UIå¯¹è±¡ä½ç½®å’Œå¤§å°çš„åˆ·æ–°)ã€‚</p></blockquote><h4 id="æºç è§£æ"><a href="#æºç è§£æ" class="headerlink" title="æºç è§£æ"></a>æºç è§£æ</h4><p>&gt;</p>]]></content>
    
    
    <summary type="html">è´Ÿè´£å¸ƒå±€çš„åˆ·æ–°(UIå¯¹è±¡ä½ç½®å’Œå¤§å°çš„åˆ·æ–°)</summary>
    
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/categories/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/tags/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>UGUIæºç è§£æâ€”â€”CanvasUpdateRegistry</title>
    <link href="https://azzurebubble.github.io/posts/6dcd3730.html"/>
    <id>https://azzurebubble.github.io/posts/6dcd3730.html</id>
    <published>2024-07-18T14:27:22.000Z</published>
    <updated>2024-07-18T14:55:06.910Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>CanvasUpdateï¼šç”¨äºæè¿°åœ¨Canvasæ›´æ–°è¿‡ç¨‹ä¸­å¯èƒ½å‘ç”Ÿçš„ä¸åŒé˜¶æ®µ</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">enum</span> CanvasUpdate</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> å¸ƒå±€æ›´æ–°ä¹‹å‰è°ƒç”¨</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    Prelayout = <span class="number">0</span>,</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> å¸ƒå±€æ›´æ–°æ—¶è°ƒç”¨</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    Layout = <span class="number">1</span>,</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> å¸ƒå±€æ›´æ–°ä¹‹åè°ƒç”¨</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    PostLayout = <span class="number">2</span>,</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> æ¸²æŸ“ä¹‹å‰è°ƒç”¨</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    PreRender = <span class="number">3</span>,</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> æ¸²æŸ“ä¹‹å‰å®Œæˆåè°ƒç”¨</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    LatePreRender = <span class="number">4</span>,</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> è¡¨ç¤ºæšä¸¾çš„èŒƒå›´ï¼Œè¾¹ç•Œæ£€æµ‹æˆ–è€…è¿­ä»£</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    MaxUpdateValue = <span class="number">5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ICanvasElementï¼šå›¾åƒã€å¸ƒå±€é‡å»ºæ¥å£ã€‚å‡ ä¹æ‰€æœ‰UIå¯¹è±¡éƒ½ç»§æ‰¿è‡ªICanvasElementæ¥å£ï¼Œä¸€ä¸ªUIå¯¹è±¡è‹¥è¦é‡å»ºéƒ½éœ€è¦ç»§æ‰¿è‡ªICanvasElementæ¥å£ã€‚</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">ICanvasElement</span></span><br><span class="line"> &#123;</span><br><span class="line">     <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> é‡æ„æ–¹æ³•ï¼Œéœ€è¦åœ¨ç»§æ‰¿ç±»ä¸­å®ç°ï¼ŒGraphicå’ŒLayoutRebuilderç»§æ‰¿äº†æ­¤æ¥å£</span></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;executing&quot;&gt;</span>æ­£åœ¨é‡å»ºçš„å½“å‰çš„CanvasUpdateé˜¶æ®µ<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">     <span class="function"><span class="keyword">void</span> <span class="title">Rebuild</span>(<span class="params">CanvasUpdate executing</span>)</span>;</span><br><span class="line"></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> æ¯ä¸ªUIéƒ½ç»§æ‰¿è‡ªUIBehaviourç±»ï¼ŒUIBehaviourç»§æ‰¿è‡ªMonoBehaviourï¼ŒMonoBehaviourç»§æ‰¿è‡ªComponentç±»ï¼Œè€ŒComponentç±»å®ç°äº†transformå±æ€§ï¼Œæ‰€ä»¥å­ç±»å¯ä»¥ä¸å†å®ç°è¿™ä¸ªå±æ€§</span></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">     Transform transform &#123; <span class="keyword">get</span>; &#125;</span><br><span class="line"></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> å¸ƒå±€å®Œæˆçš„å›è°ƒå‡½æ•°</span></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">     <span class="function"><span class="keyword">void</span> <span class="title">LayoutComplete</span>()</span>;</span><br><span class="line"></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> å›¾åƒæ›´æ–°å®Œæˆçš„å›è°ƒå‡½æ•°</span></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">     <span class="function"><span class="keyword">void</span> <span class="title">GraphicUpdateComplete</span>()</span>;</span><br><span class="line"></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> è·å–UIå¯¹è±¡æ˜¯å¦é”€æ¯</span></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">     <span class="function"><span class="built_in">bool</span> <span class="title">IsDestroyed</span>()</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><blockquote><p>CanvasUpdateRegistryï¼šæ˜¯ä¸€ä¸ªå•ä¾‹ï¼Œå®ƒç›‘å¬äº†Canvaså³å°†æ¸²æŸ“çš„äº‹ä»¶ï¼Œå¹¶è°ƒç”¨å·²æ³¨å†Œå¯¹è±¡çš„Rebuildã€LayoutCompleteã€GraphicUpdateCompleteæ–¹æ³•ï¼Œ<font color=red>è€Œå…¶ä¸­çš„Rebuildæ–¹æ³•å°±æ˜¯æ¯ä¸ªUIå…ƒç´ çš„åˆ·æ–°æ–¹æ³•ã€‚</font></p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å•ä¾‹è·å–</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> CanvasUpdateRegistry s_Instance;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> CanvasUpdateRegistry instance</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">get</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (s_Instance == <span class="literal">null</span>)</span><br><span class="line">            s_Instance = <span class="keyword">new</span> CanvasUpdateRegistry();</span><br><span class="line">        <span class="keyword">return</span> s_Instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„é€ å‡½æ•°ï¼šç»™Canvasçš„é™æ€äº‹ä»¶willRenderCanvasesæ³¨å†Œä¸€ä¸ªåä¸ºPerformUpdateçš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">// (willRenderCanvasesæ¯å¸§åœ¨Canvasæ¸²æŸ“å‰æ‰§è¡Œ)ï¼ŒPerformUpdateä¸­è°ƒç”¨äº†å¸ƒå±€å’Œå›¾åƒçš„æ›´æ–°</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="title">CanvasUpdateRegistry</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Canvas.willRenderCanvases += PerformUpdate;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸¤ä¸ªæ ‡è®°æ˜¯å¦åœ¨è¿›è¡Œå¸ƒå±€æˆ–å›¾åƒæ›´æ–°çš„å­—æ®µ</span></span><br><span class="line"><span class="keyword">private</span> <span class="built_in">bool</span> m_PerformingLayoutUpdate;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">bool</span> m_PerformingGraphicUpdate;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨äºåœ¨æ€§èƒ½åˆ†æå™¨ä¸­è¯†åˆ«å’Œè®°å½•Canvasæ›´æ–°è¿‡ç¨‹ä¸­çš„ä¸åŒé˜¶æ®µçš„æ ‡è¯†ç¬¦</span></span><br><span class="line"><span class="keyword">private</span> <span class="built_in">string</span>[] m_CanvasUpdateProfilerStrings = <span class="keyword">new</span> <span class="built_in">string</span>[] &#123; <span class="string">&quot;CanvasUpdate.Prelayout&quot;</span>, <span class="string">&quot;CanvasUpdate.Layout&quot;</span>, <span class="string">&quot;CanvasUpdate.PostLayout&quot;</span>, <span class="string">&quot;CanvasUpdate.PreRender&quot;</span>, <span class="string">&quot;CanvasUpdate.LatePreRender&quot;</span> &#125;;</span><br><span class="line"><span class="comment">// ç”¨äºåœ¨æ€§èƒ½åˆ†æå™¨æˆ–è°ƒè¯•å™¨ä¸­æ ‡è¯†å‰ªåˆ‡å™¨æ³¨å†Œè¡¨ä¸­æ‰§è¡Œè£å‰ªçš„æ ‡è¯†ç¬¦</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="built_in">string</span> m_CullingUpdateProfilerString = <span class="string">&quot;ClipperRegistry.Cull&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸ƒå±€é‡å»ºåºåˆ—å’Œå›¾åƒé‡å»ºåºåˆ—</span></span><br><span class="line"><span class="comment">// å½“éœ€è¦æ›´æ–°å¸ƒå±€æˆ–å›¾åƒæ—¶ï¼Œå¯ä»¥è°ƒç”¨RegisterCanvasElementForLayoutRebuildå’Œ</span></span><br><span class="line"><span class="comment">// RegisterCanvasElementForGraphicRebuildä¸¤ä¸ªæ–¹æ³•å°†å¯¹è±¡æ·»åŠ åˆ°å¯¹åº”çš„é‡å»ºåºåˆ—ä¸­</span></span><br><span class="line"><span class="comment">// PerformUpdateæ–¹æ³•ä¼šè°ƒç”¨Rebuildæ–¹æ³•å¯¹è¿™ä¸¤ä¸ªåºåˆ—ä¸­ä¸­çš„å¯¹è±¡è¿›è¡Œæ›´æ–°æ“ä½œ</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">readonly</span> IndexedSet&lt;ICanvasElement&gt; m_LayoutRebuildQueue = <span class="keyword">new</span> IndexedSet&lt;ICanvasElement&gt;();</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">readonly</span> IndexedSet&lt;ICanvasElement&gt; m_GraphicRebuildQueue = <span class="keyword">new</span> IndexedSet&lt;ICanvasElement&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ£€æŸ¥æŒ‡å®šçš„Canvaså…ƒç´ æ˜¯å¦æ˜¯Unityçš„Objectï¼Œæ˜¯å¦å¯ä»¥è¿›è¡Œæœ‰æ•ˆæ›´æ–°</span></span><br><span class="line"><span class="comment">// Objectæ˜¯Unityæ‰€æœ‰å¯¹è±¡çš„åŸºç±»ï¼Œobjectæ˜¯C#ä¸­æ‰€æœ‰å¯¹è±¡çš„åŸºç±»</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="built_in">bool</span> <span class="title">ObjectValidForUpdate</span>(<span class="params">ICanvasElement element</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> valid = element != <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> isUnityObject = element <span class="keyword">is</span> Object;</span><br><span class="line">    <span class="keyword">if</span> (isUnityObject)</span><br><span class="line">        valid = (element <span class="keyword">as</span> Object) != <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> valid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¸…ç†ä¸¤ä¸ªé˜Ÿåˆ—ä¸­çš„æ— æ•ˆå…ƒç´ </span></span><br><span class="line"><span class="comment">// MonoBehaviourå¯¹ç©ºå€¼ç›¸ç­‰æ€§é‡è½½äº†==æ“ä½œç¬¦ï¼Œç”¨äºæ£€æŸ¥ä»–ä»¬æ˜¯å¦è¢«é”€æ¯</span></span><br><span class="line"><span class="comment">// è¿™æ®µä»£ç ä¸­å¤„ç†çš„æ˜¯ä¸€ä¸ªICanvasElementæ¥å£ç±»å‹çš„åˆ—è¡¨ï¼Œè€Œä¸æ˜¯å…·ä½“çš„MonoBehaviourç±»å‹</span></span><br><span class="line"><span class="comment">// å› æ­¤ç›´æ¥ä½¿ç”¨==æ“ä½œç¬¦ä¸èƒ½ç›´æ¥è½¬å‘åˆ°MonoBehaviourï¼Œè€Œåªæ˜¯æ£€æŸ¥æ¥å£æœ¬èº«æ˜¯å¦ä¸ºnull</span></span><br><span class="line"><span class="comment">// IsDestroyed()æ–¹æ³•ç”¨äºæ£€æŸ¥å…ƒç´ çš„åç«¯æ˜¯å¦è¢«é”€æ¯</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">CleanInvalidItems</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> layoutRebuildQueueCount = m_LayoutRebuildQueue.Count;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = layoutRebuildQueueCount - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> item = m_LayoutRebuildQueue[i];</span><br><span class="line">        <span class="comment">// å…ƒç´ æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">if</span> (item == <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            m_LayoutRebuildQueue.RemoveAt(i);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å…ƒç´ æ˜¯å¦è¢«é”€æ¯</span></span><br><span class="line">        <span class="keyword">if</span> (item.IsDestroyed())</span><br><span class="line">        &#123;</span><br><span class="line">            m_LayoutRebuildQueue.RemoveAt(i);</span><br><span class="line">            item.LayoutComplete();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> graphicRebuildQueueCount = m_GraphicRebuildQueue.Count;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = graphicRebuildQueueCount - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> item = m_GraphicRebuildQueue[i];</span><br><span class="line">        <span class="keyword">if</span> (item == <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            m_GraphicRebuildQueue.RemoveAt(i);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (item.IsDestroyed())</span><br><span class="line">        &#123;</span><br><span class="line">            m_GraphicRebuildQueue.RemoveAt(i);</span><br><span class="line">            item.GraphicUpdateComplete();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¡ç®—æŒ‡å®šTransformå¯¹è±¡çš„çˆ¶çº§å±‚çº§æ•°ç›®</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">ParentCount</span>(<span class="params">Transform child</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (child == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> parent = child.parent;</span><br><span class="line">    <span class="built_in">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (parent != <span class="literal">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        count++;</span><br><span class="line">        parent = parent.parent;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ çš„ç¥–å…ˆå±‚çº§æ·±åº¦ï¼Œç¥–å…ˆå±‚çº§æ·±åº¦è¶Šæ·±ï¼Œåˆ™æ’åœ¨åˆ—è¡¨çš„æ›´åé¢</span></span><br><span class="line"><span class="comment">// å†³å®šå…ƒç´ çš„å¸ƒå±€å’Œå›¾åƒé‡å»ºé¡ºåº</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">SortLayoutList</span>(<span class="params">ICanvasElement x, ICanvasElement y</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    Transform t1 = x.transform;</span><br><span class="line">    Transform t2 = y.transform;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ParentCount(t1) - ParentCount(t2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†ä¸€ä¸ªCanvaså…ƒç´ æ³¨å†Œåˆ°å¸ƒå±€é‡å»ºé˜Ÿåˆ—ä¸­ï¼Œä¸€ä¸ªå¸¦è¿”å›å€¼ä¸€ä¸ªä¸å¸¦è¿”å›å€¼æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">RegisterCanvasElementForLayoutRebuild</span>(<span class="params">ICanvasElement element</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    instance.InternalRegisterCanvasElementForLayoutRebuild(element);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">TryRegisterCanvasElementForLayoutRebuild</span>(<span class="params">ICanvasElement element</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> instance.InternalRegisterCanvasElementForLayoutRebuild(element);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="built_in">bool</span> <span class="title">InternalRegisterCanvasElementForLayoutRebuild</span>(<span class="params">ICanvasElement element</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨å¸ƒå±€é‡å»ºé˜Ÿåˆ—ä¸­</span></span><br><span class="line">    <span class="keyword">if</span> (m_LayoutRebuildQueue.Contains(element))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// å‘å¸ƒå±€é‡å»ºé˜Ÿåˆ—ä¸­æ·»åŠ å…ƒç´ ï¼Œç¡®ä¿ä¸ä¼šé‡å¤æ·»åŠ </span></span><br><span class="line">    <span class="keyword">return</span> m_LayoutRebuildQueue.AddUnique(element);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†ä¸€ä¸ªCanvaså…ƒç´ æ³¨å†Œåˆ°å›¾åƒé‡å»ºé˜Ÿåˆ—ä¸­ï¼Œä¸€ä¸ªå¸¦è¿”å›å€¼ä¸€ä¸ªä¸å¸¦è¿”å›å€¼æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">RegisterCanvasElementForGraphicRebuild</span>(<span class="params">ICanvasElement element</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    instance.InternalRegisterCanvasElementForGraphicRebuild(element);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">TryRegisterCanvasElementForGraphicRebuild</span>(<span class="params">ICanvasElement element</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> instance.InternalRegisterCanvasElementForGraphicRebuild(element);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="built_in">bool</span> <span class="title">InternalRegisterCanvasElementForGraphicRebuild</span>(<span class="params">ICanvasElement element</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æ˜¯å¦æ­£åœ¨è¿›è¡Œå›¾åƒé‡å»ºæ›´æ–°æ“ä½œï¼Œæ˜¯çš„è¯å°†ä¸ä¼šå°†å…ƒç´ æ·»åŠ åˆ°å›¾åƒé‡å»ºé˜Ÿåˆ—ä¸­</span></span><br><span class="line">    <span class="keyword">if</span> (m_PerformingGraphicUpdate)</span><br><span class="line">    &#123;</span><br><span class="line">        Debug.LogError(<span class="built_in">string</span>.Format(<span class="string">&quot;Trying to add &#123;0&#125; for graphic rebuild while we are already inside a graphic rebuild loop. This is not supported.&quot;</span>, element));</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// å‘å›¾åƒé‡å»ºé˜Ÿåˆ—ä¸­æ·»åŠ å…ƒç´ ï¼Œç¡®ä¿ä¸ä¼šé‡å¤æ·»åŠ </span></span><br><span class="line">    <span class="keyword">return</span> m_GraphicRebuildQueue.AddUnique(element);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»å¸ƒå±€å’Œé‡å»ºçš„é˜Ÿåˆ—ä¸­ç§»é™¤æŒ‡å®šçš„Canvaså…ƒç´ </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">UnRegisterCanvasElementForRebuild</span>(<span class="params">ICanvasElement element</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    instance.InternalUnRegisterCanvasElementForLayoutRebuild(element);</span><br><span class="line">    instance.InternalUnRegisterCanvasElementForGraphicRebuild(element);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">InternalUnRegisterCanvasElementForLayoutRebuild</span>(<span class="params">ICanvasElement element</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ­£åœ¨è¿›è¡Œå¸ƒå±€é‡å»ºæ›´æ–°æ“ä½œï¼Œå°†ä¸ä¼šç§»é™¤æŒ‡å®šå…ƒç´ </span></span><br><span class="line">    <span class="keyword">if</span> (m_PerformingLayoutUpdate)</span><br><span class="line">    &#123;</span><br><span class="line">        Debug.LogError(<span class="built_in">string</span>.Format(<span class="string">&quot;Trying to remove &#123;0&#125; from rebuild list while we are already inside a rebuild loop. This is not supported.&quot;</span>, element));</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// è°ƒç”¨å…ƒç´ çš„å¸ƒå±€é‡å»ºå®Œæˆå‡½æ•°</span></span><br><span class="line">    element.LayoutComplete();</span><br><span class="line">    <span class="comment">// ä»å¸ƒå±€é‡å»ºé˜Ÿåˆ—ä¸­ç§»é™¤å…ƒç´ </span></span><br><span class="line">    instance.m_LayoutRebuildQueue.Remove(element);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">InternalUnRegisterCanvasElementForGraphicRebuild</span>(<span class="params">ICanvasElement element</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ­£åœ¨è¿›è¡Œå›¾åƒé‡å»ºæ›´æ–°æ“ä½œï¼Œå°†ä¸ä¼šç§»é™¤æŒ‡å®šå…ƒç´ </span></span><br><span class="line">    <span class="keyword">if</span> (m_PerformingGraphicUpdate)</span><br><span class="line">    &#123;</span><br><span class="line">        Debug.LogError(<span class="built_in">string</span>.Format(<span class="string">&quot;Trying to remove &#123;0&#125; from rebuild list while we are already inside a rebuild loop. This is not supported.&quot;</span>, element));</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è°ƒç”¨å…ƒç´ çš„å›¾åƒé‡å»ºå®Œæˆå‡½æ•°</span></span><br><span class="line">    element.GraphicUpdateComplete();</span><br><span class="line">    <span class="comment">// ä»å›¾åƒé‡å»ºé˜Ÿåˆ—ä¸­ç§»é™¤å…ƒç´ </span></span><br><span class="line">    instance.m_GraphicRebuildQueue.Remove(element);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»å¸ƒå±€å’Œé‡å»ºçš„é˜Ÿåˆ—ä¸­ç¦ç”¨æŒ‡å®šçš„Canvaså…ƒç´ </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">DisableCanvasElementForRebuild</span>(<span class="params">ICanvasElement element</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    instance.InternalDisableCanvasElementForLayoutRebuild(element);</span><br><span class="line">    instance.InternalDisableCanvasElementForGraphicRebuild(element);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">InternalDisableCanvasElementForLayoutRebuild</span>(<span class="params">ICanvasElement element</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ­£åœ¨è¿›è¡Œå¸ƒå±€é‡å»ºæ›´æ–°æ“ä½œï¼Œå°†ä¸ä¼šç¦ç”¨æŒ‡å®šå…ƒç´ </span></span><br><span class="line">    <span class="keyword">if</span> (m_PerformingLayoutUpdate)</span><br><span class="line">    &#123;</span><br><span class="line">        Debug.LogError(<span class="built_in">string</span>.Format(<span class="string">&quot;Trying to remove &#123;0&#125; from rebuild list while we are already inside a rebuild loop. This is not supported.&quot;</span>, element));</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// è°ƒç”¨å…ƒç´ çš„å¸ƒå±€é‡å»ºå®Œæˆå‡½æ•°</span></span><br><span class="line">    element.LayoutComplete();</span><br><span class="line">    <span class="comment">// ç¦ç”¨æŒ‡å®šå…ƒç´ </span></span><br><span class="line">    instance.m_LayoutRebuildQueue.DisableItem(element);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">InternalDisableCanvasElementForGraphicRebuild</span>(<span class="params">ICanvasElement element</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ­£åœ¨è¿›è¡Œå›¾åƒé‡å»ºæ›´æ–°æ“ä½œï¼Œå°†ä¸ä¼šç¦ç”¨æŒ‡å®šå…ƒç´ </span></span><br><span class="line">    <span class="keyword">if</span> (m_PerformingGraphicUpdate)</span><br><span class="line">    &#123;</span><br><span class="line">        Debug.LogError(<span class="built_in">string</span>.Format(<span class="string">&quot;Trying to remove &#123;0&#125; from rebuild list while we are already inside a rebuild loop. This is not supported.&quot;</span>, element));</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è°ƒç”¨å…ƒç´ çš„å›¾åƒé‡å»ºå®Œæˆå‡½æ•°</span></span><br><span class="line">    element.GraphicUpdateComplete();</span><br><span class="line">    <span class="comment">// ç¦ç”¨æŒ‡å®šå…ƒç´ </span></span><br><span class="line">    instance.m_GraphicRebuildQueue.DisableItem(element);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“å‰æ˜¯å¦æ­£åœ¨è®¡ç®—å›¾å½¢å¸ƒå±€</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">IsRebuildingLayout</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> instance.m_PerformingLayoutUpdate;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å½“å‰æ˜¯å¦æ­£åœ¨é‡å»ºå›¾å½¢</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">IsRebuildingGraphics</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> instance.m_PerformingGraphicUpdate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ¥ä¸‹æ¥ç€é‡åˆ†æCanvasUpdateRegistryä¸­çš„PerformUpdateæ–¹æ³•çš„å†…éƒ¨å®ç°å’Œæ‰§è¡Œé¡ºåºã€‚<font color=red>å¯ä»¥åœ¨Profilerä¸­é€šè¿‡æŸ¥çœ‹æ ‡å¿—æ€§å‡½æ•°Canvas.willRenderCanvasesçš„è€—æ—¶ï¼Œæ¥äº†è§£é‡å»ºçš„æ€§èƒ½æ¶ˆè€—</font></p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…ˆå®šä¹‰ä¸€ä¸ªé™æ€åªè¯»çš„æ¯”è¾ƒå‡½æ•°å§”æ‰˜</span></span><br><span class="line"><span class="comment">// Comparison&lt;T&gt;æ˜¯C#å·²ç»é¢„å®šä¹‰å¥½çš„ä¸€ä¸ªç”¨äºæ¯”è¾ƒä¸¤ä¸ªç±»å‹ä¸ºTçš„å¯¹è±¡å¹¶è¿”å›æ•´æ•°çš„å§”æ‰˜</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> Comparison&lt;ICanvasElement&gt; s_SortLayoutFunction = SortLayoutList;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">PerformUpdate</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ç”¨äºåœ¨ä»£ç å—å¼€å§‹å’Œç»“æŸæ—¶è®°å½•æ€§èƒ½æ ·æœ¬ï¼Œç›‘æµ‹å¸ƒå±€æ›´æ–°çš„æ€§èƒ½</span></span><br><span class="line">    UISystemProfilerApi.BeginSample(UISystemProfilerApi.SampleType.Layout);</span><br><span class="line">    <span class="comment">// æ¸…ç†æ— æ•ˆçš„å…ƒç´ æˆ–æ•°æ®</span></span><br><span class="line">    CleanInvalidItems();</span><br><span class="line"><span class="comment">// æ ‡è®°æ­£åœ¨è¿›è¡Œå¸ƒå±€æ›´æ–°æ“ä½œ</span></span><br><span class="line">    m_PerformingLayoutUpdate = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// å¯¹å¸ƒå±€é‡å»ºé˜Ÿåˆ—ä¸­çš„å…ƒç´ è¿›è¡Œæ’åº</span></span><br><span class="line">    m_LayoutRebuildQueue.Sort(s_SortLayoutFunction);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt;= (<span class="built_in">int</span>)CanvasUpdate.PostLayout; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// æ ‡è®°æ¯ä¸€ä¸ªå…ƒç´ çš„æ€§èƒ½åˆ†æ</span></span><br><span class="line">        UnityEngine.Profiling.Profiler.BeginSample(m_CanvasUpdateProfilerStrings[i]);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> j = <span class="number">0</span>; j &lt; m_LayoutRebuildQueue.Count; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">var</span> rebuild = m_LayoutRebuildQueue[j];</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// åˆ¤æ–­å…ƒç´ æ˜¯å¦æ˜¯æœ‰æ•ˆå…ƒç´ </span></span><br><span class="line">                <span class="comment">// å¯¹å¸ƒå±€é‡å»ºåºåˆ—ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡ŒCanvasUpdateçš„æ¯ä¸ªé˜¶æ®µæ›´æ–°</span></span><br><span class="line">                <span class="keyword">if</span> (ObjectValidForUpdate(rebuild))</span><br><span class="line">                    rebuild.Rebuild((CanvasUpdate)i);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Exception e)</span><br><span class="line">            &#123;</span><br><span class="line">                Debug.LogException(e, rebuild.transform);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        UnityEngine.Profiling.Profiler.EndSample();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; m_LayoutRebuildQueue.Count; ++i)</span><br><span class="line">        <span class="comment">// è°ƒç”¨å¸ƒå±€é‡å»ºå®Œæˆå‡½æ•°</span></span><br><span class="line">        m_LayoutRebuildQueue[i].LayoutComplete();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¸…ç©ºå¸ƒå±€é‡å»ºåˆ—è¡¨ï¼Œå¹¶ä¿®æ”¹å¸ƒå±€é‡å»ºæ ‡å¿—ä¸ºfalse</span></span><br><span class="line">    m_LayoutRebuildQueue.Clear();</span><br><span class="line">    m_PerformingLayoutUpdate = <span class="literal">false</span>;</span><br><span class="line">    UISystemProfilerApi.EndSample(UISystemProfilerApi.SampleType.Layout);</span><br><span class="line">    UISystemProfilerApi.BeginSample(UISystemProfilerApi.SampleType.Render);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// now layout is complete do culling...</span></span><br><span class="line">    UnityEngine.Profiling.Profiler.BeginSample(m_CullingUpdateProfilerString);</span><br><span class="line">    <span class="comment">// æ‰§è¡Œå®é™…çš„è£å‰ªæ“ä½œ</span></span><br><span class="line">    ClipperRegistry.instance.Cull();</span><br><span class="line">    UnityEngine.Profiling.Profiler.EndSample();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ‡è®°æ­£åœ¨è¿›è¡Œå›¾åƒæ›´æ–°æ“ä½œ</span></span><br><span class="line">    m_PerformingGraphicUpdate = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = (<span class="built_in">int</span>)CanvasUpdate.PreRender; i &lt; (<span class="built_in">int</span>)CanvasUpdate.MaxUpdateValue; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        UnityEngine.Profiling.Profiler.BeginSample(m_CanvasUpdateProfilerStrings[i]);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> k = <span class="number">0</span>; k &lt; m_GraphicRebuildQueue.Count; k++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">var</span> element = m_GraphicRebuildQueue[k];</span><br><span class="line">                <span class="comment">// åˆ¤æ–­å…ƒç´ æ˜¯å¦æ˜¯æœ‰æ•ˆå…ƒç´ </span></span><br><span class="line">                <span class="comment">// å¯¹å¸ƒå±€é‡å»ºåºåˆ—ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡ŒCanvasUpdateçš„æ¯ä¸ªé˜¶æ®µæ›´æ–°</span></span><br><span class="line">                <span class="keyword">if</span> (ObjectValidForUpdate(element))</span><br><span class="line">                    element.Rebuild((CanvasUpdate)i);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Exception e)</span><br><span class="line">            &#123;</span><br><span class="line">                Debug.LogException(e, m_GraphicRebuildQueue[k].transform);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        UnityEngine.Profiling.Profiler.EndSample();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; m_GraphicRebuildQueue.Count; ++i)</span><br><span class="line">        <span class="comment">// è°ƒç”¨å›¾åƒé‡å»ºå®Œæˆå‡½æ•°</span></span><br><span class="line">        m_GraphicRebuildQueue[i].GraphicUpdateComplete();</span><br><span class="line"><span class="comment">// æ¸…ç©ºå›¾åƒé‡å»ºåºåˆ— å¹¶ä¿®æ”¹å›¾åƒé‡å»ºæ ‡å¿—ä¸ºfalse</span></span><br><span class="line">    m_GraphicRebuildQueue.Clear();</span><br><span class="line">    m_PerformingGraphicUpdate = <span class="literal">false</span>;</span><br><span class="line">    UISystemProfilerApi.EndSample(UISystemProfilerApi.SampleType.Render);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">å›¾åƒã€å¸ƒå±€é‡å»ºæ³¨å†Œå™¨</summary>
    
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/categories/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/tags/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>UGUIæºç è§£æâ€”â€”ClipperRegistry</title>
    <link href="https://azzurebubble.github.io/posts/c266fbd7.html"/>
    <id>https://azzurebubble.github.io/posts/c266fbd7.html</id>
    <published>2024-07-18T01:46:53.000Z</published>
    <updated>2024-07-18T14:53:52.573Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ClipperRegisterï¼šæ˜¯ä¸€ä¸ªè£å‰ªæ³¨å†Œå™¨å•ä¾‹ï¼Œç”¨äºè·Ÿè¸ªåœºæ™¯ä¸­å­˜åœ¨çš„æ‰€æœ‰IClipperã€‚</p><p>è¿™åœ¨CanvasUpdateå¾ªç¯æœŸé—´ç”¨äºå‰”é™¤å¯å‰ªè£å…ƒç´ ã€‚å‰ªè£åœ¨å¸ƒå±€ä¹‹åä½†åœ¨å›¾å½¢æ›´æ–°ä¹‹å‰è°ƒç”¨ã€‚</p></blockquote><h4 id="æºç è§£æ">æºç è§£æ</h4><blockquote><p>å•ä¾‹</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å•ä¾‹è·å–</span></span><br><span class="line"><span class="keyword">static</span> ClipperRegistry s_Instance;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> ClipperRegistry instance</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">get</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (s_Instance == <span class="literal">null</span>)</span><br><span class="line">            s_Instance = <span class="keyword">new</span> ClipperRegistry();</span><br><span class="line">        <span class="keyword">return</span> s_Instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä¿æŠ¤ç±»å‹çš„æ„é€ å‡½æ•°ï¼Œè¿™é‡Œé¢å£°æ˜äº†ä¸€ä¸ªç©ºçš„å¸¦æœ‰å…·ä½“ç±»å‹çš„å­—å…¸ï¼Œæ˜¯ä¸ºäº†åœ¨AOTå¹³å°ä¸­èƒ½å¤Ÿè¯†åˆ«ä½¿ç”¨å‰é¢è¯´åˆ°çš„IndexedSetè‡ªå®šä¹‰å®¹å™¨ä¸­çš„å­—å…¸å®¹å™¨ã€‚</p><p>ç±»å‹çš„å¯å‚è€ƒxLuaçƒ­æ›´æ–°å°±éœ€è¦ç»™æ¯ä¸ªæ³›å‹å®¹å™¨é¢„å…ˆå®šä¹‰ä¸€ä¸ªç©ºçš„å…·ä½“ç±»å‹çš„å®¹å™¨ã€‚</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="title">ClipperRegistry</span>()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> <span class="keyword">warning</span> disable 168</span></span><br><span class="line">    Dictionary&lt;IClipper, <span class="built_in">int</span>&gt; emptyIClipperDic;</span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> <span class="keyword">warning</span> restore 168</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Registerï¼šå°†è£å‰ªå¯¹è±¡æ·»åŠ åˆ°m_Clippersåºåˆ—ä¸­</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Register</span>(<span class="params">IClipper c</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (c == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    instance.m_Clippers.AddUnique(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Cullï¼šå¯¹æ‰€æœ‰æ³¨å†Œçš„IClipperæ‰§è¡Œå‰ªè¾‘ï¼Œåœ¨CanvasUpdateRegistryç±»ä¸­çš„PerformUpdateä¸­è°ƒç”¨äº†è¿™ä¸ªæ–¹æ³•ï¼Œå¯å›é¡¾æŸ¥çœ‹</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Cull</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; m_Clippers.Count; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        m_Clippers[i].PerformClipping();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Unregisterï¼šå–æ¶ˆæ³¨å†Œçš„IClipperå…ƒç´ </p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Unregister</span>(<span class="params">IClipper c</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">instance.m_Clippers.Remove(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ä¸€ä¸ªè£å‰ªæ³¨å†Œå™¨å•ä¾‹</summary>
    
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/categories/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/tags/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>UGUIæºç è§£æâ€”â€”IClipper</title>
    <link href="https://azzurebubble.github.io/posts/75a13096.html"/>
    <id>https://azzurebubble.github.io/posts/75a13096.html</id>
    <published>2024-07-17T13:10:49.000Z</published>
    <updated>2024-07-18T14:55:39.867Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>IClipperï¼šè£å‰ªæ¥å£ï¼ˆè£å‰ªè€…ï¼‰ï¼ŒRectMask2Dç»§æ‰¿æ­¤æ¥å£</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­ç±»å®ç°PerformClipping</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IClipper</span></span><br><span class="line">&#123;</span><br><span class="line">     <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> å‡½æ•°ç”¨äºç­›é€‰/å‰ªè¾‘å­å…ƒç´ </span></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;remarks&gt;</span></span></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> CanvasUpdateRegistryç±»ä¸­çš„PerformUpdateé‡Œè°ƒç”¨äº†Cullæ–¹æ³•æ‰§è¡Œè£å‰ª</span></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> åœ¨Canvasæ›´æ–°å¾ªç¯çš„å¸ƒå±€ä¹‹åå’Œå›¾å½¢æ›´æ–°ä¹‹å‰è°ƒç”¨</span></span><br><span class="line">     <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/remarks&gt;</span></span></span><br><span class="line">     <span class="function"><span class="keyword">void</span> <span class="title">PerformClipping</span>()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">è£å‰ªæ¥å£ï¼ˆè£å‰ªè€…ï¼‰</summary>
    
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/categories/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/tags/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>UGUIæºç è§£æâ€”â€”IndexedSet</title>
    <link href="https://azzurebubble.github.io/posts/ad6295b1.html"/>
    <id>https://azzurebubble.github.io/posts/ad6295b1.html</id>
    <published>2024-07-17T13:00:16.000Z</published>
    <updated>2024-07-18T14:55:34.060Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>IndexedSetï¼š</p><p>ä¼˜ç‚¹ï¼šä¿è¯å®¹å™¨å…ƒç´ çš„å”¯ä¸€æ€§ï¼Œå¿«é€Ÿéšæœºç§»é™¤ï¼Œå¿«é€Ÿå”¯ä¸€çš„æ·»åŠ å…ƒç´ åˆ°å®¹å™¨å°¾éƒ¨ï¼Œé¡ºåºè®¿é—®</p><p>ç¼ºç‚¹ï¼šä½¿ç”¨æ›´å¤šçš„å†…å­˜ï¼Œæ’åºä¸æ˜¯æŒä¹…åŒ–çš„ï¼Œä¸æ”¯æŒåºåˆ—åŒ–</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“åˆ é™¤æ—¶ï¼Œæˆ‘ä»¬å°†æœ€åä¸€é¡¹ç§»åŠ¨åˆ°åˆ é™¤é¡¹çš„ä½ç½®ï¼Œè¿™æ ·æˆ‘ä»¬åªéœ€è¦æ›´æ–°å•ä¸ªé¡¹çš„ç´¢å¼•ç¼“å­˜ã€‚(å¿«é€Ÿåˆ é™¤)</span></span><br><span class="line"><span class="comment">// ä¸ä¿è¯å…ƒç´ çš„é¡ºåºã€‚ç§»é™¤å°†æ”¹å˜é¡¹ç›®çš„é¡ºåºã€‚</span></span><br><span class="line"><span class="keyword">readonly</span> List&lt;T&gt; m_List = <span class="keyword">new</span> List&lt;T&gt;();</span><br><span class="line"><span class="comment">// ä½¿ç”¨å­—å…¸æ¥åŠ é€Ÿåˆ—è¡¨çš„æŸ¥æ‰¾ï¼Œè¿™ä¹Ÿä¿è¯äº†åˆ—è¡¨ä¸­å…ƒç´ çš„å”¯ä¸€æ€§</span></span><br><span class="line">Dictionary&lt;T, <span class="built_in">int</span>&gt; m_Dictionary = <span class="keyword">new</span> Dictionary&lt;T, <span class="built_in">int</span>&gt;();</span><br></pre></td></tr></table></figure><blockquote><p>Addï¼šæ·»åŠ å…ƒç´ åˆ°åˆ—è¡¨ä¸­</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Add</span>(<span class="params">T item</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æ·»åŠ å…ƒç´ åˆ°Listä¸­</span></span><br><span class="line">    m_List.Add(item);</span><br><span class="line">    <span class="comment">// ä»¥å…ƒç´ ä½œä¸ºkeyï¼Œåˆ—è¡¨ä¸­çš„ä¸‹æ ‡ä½œä¸ºvalue</span></span><br><span class="line">    m_Dictionary.Add(item, m_List.Count - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>AddUniqueï¼šç¡®ä¿åˆ—è¡¨ä¸­çš„å…ƒç´ çš„å”¯ä¸€æ€§çš„æ·»åŠ æ–¹æ³•</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">AddUnique</span>(<span class="params">T item</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­å­—å…¸ä¸­æ˜¯å¦å­˜åœ¨key</span></span><br><span class="line">    <span class="keyword">if</span> (m_Dictionary.ContainsKey(item))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    ä¸å­˜åœ¨åˆ™æ·»åŠ </span><br><span class="line">    m_List.Add(item);</span><br><span class="line">    m_Dictionary.Add(item, m_List.Count - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Removeï¼šåˆ é™¤åˆ—è¡¨ä¸­çš„å…ƒç´ </p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">Remove</span>(<span class="params">T item</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å–å‡ºå¯¹åº”å…ƒç´ åœ¨Listä¸­çš„ä¸‹æ ‡ä½ç½®</span></span><br><span class="line">    <span class="built_in">int</span> index = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span> (!m_Dictionary.TryGetValue(item, <span class="keyword">out</span> index))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="comment">// åˆ é™¤Listä¸­è¯¥ä¸‹æ ‡å…ƒç´ </span></span><br><span class="line">    RemoveAt(index);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å®ç°ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•ä»¥æä¾›foreachéå†</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> IEnumerator&lt;T&gt; <span class="title">GetEnumerator</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> System.NotImplementedException();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">IEnumerator IEnumerable.GetEnumerator()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> GetEnumerator();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Clearï¼šæ¸…ç©ºè¿™ä¸ªå®¹å™¨ç±»</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Clear</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    m_List.Clear();</span><br><span class="line">    m_Dictionary.Clear();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Containsï¼šæŸ¥è¯¢æ˜¯å¦å­˜åœ¨æŸå…ƒç´ </p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">Contains</span>(<span class="params">T item</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> m_Dictionary.ContainsKey(item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>CopyToï¼šå°†æ­¤å®¹å™¨å¤åˆ¶åˆ°ä¸€ä¸ªæ³›å‹æ•°ç»„ä¸­</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ‡å®šç±»å‹çš„æ•°ç»„ æ•°ç»„ç´¢å¼•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">CopyTo</span>(<span class="params">T[] array, <span class="built_in">int</span> arrayIndex</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    m_List.CopyTo(array, arrayIndex);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Countï¼šè·å¾—å®¹å™¨å¤§å°</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">int</span> Count &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> m_List.Count; &#125; &#125;</span><br></pre></td></tr></table></figure><blockquote><p>IsReadOnlyï¼šå®¹å™¨æ˜¯å¦åªè¯»ï¼Œè¿™é‡Œä¸ºä¸æ˜¯</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">bool</span> IsReadOnly &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> <span class="literal">false</span>; &#125; &#125;</span><br></pre></td></tr></table></figure><blockquote><p>Insertï¼šå› ä¸ºè¯­ä¹‰å¯èƒ½å¾ˆå¥‡æ€ªï¼Œé¡ºåºä¸èƒ½ä¿è¯ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªå®¹å™¨æ²¡æœ‰å®ç°æ”¯æŒ</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Insert</span>(<span class="params"><span class="built_in">int</span> index, T item</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> NotSupportedException(<span class="string">&quot;Random Insertion is semantically invalid, since this structure does not guarantee ordering.&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>RemoveAtï¼šåˆ é™¤æŒ‡å®šä¸‹æ ‡çš„å…ƒç´ </p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">RemoveAt</span>(<span class="params"><span class="built_in">int</span> index</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æ‰¾åˆ°è¯¥ä¸‹æ ‡å…ƒç´ </span></span><br><span class="line">    T item = m_List[index];</span><br><span class="line">    <span class="comment">// åˆ é™¤å­—å…¸ä¸­çš„å¯¹åº”å€¼</span></span><br><span class="line">    m_Dictionary.Remove(item);</span><br><span class="line">    <span class="keyword">if</span> (index == m_List.Count - <span class="number">1</span>)</span><br><span class="line">        m_List.RemoveAt(index);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœè¯¥ä¸‹æ ‡ä¸æ˜¯åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="comment">// åˆ™å°†è¯¥å…ƒç´ æ›¿æ¢åˆ°åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="comment">// å†è¿›è¡Œåˆ é™¤æ“ä½œ</span></span><br><span class="line">        <span class="built_in">int</span> replaceItemIndex = m_List.Count - <span class="number">1</span>;</span><br><span class="line">        T replaceItem = m_List[replaceItemIndex];</span><br><span class="line">        m_List[index] = replaceItem;</span><br><span class="line">        m_Dictionary[replaceItem] = index;</span><br><span class="line">        m_List.RemoveAt(replaceItemIndex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç´¢å¼•å™¨å®ç°</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> T <span class="keyword">this</span>[<span class="built_in">int</span> index]</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">get</span> &#123; <span class="keyword">return</span> m_List[index]; &#125;</span><br><span class="line">    <span class="keyword">set</span></span><br><span class="line">    &#123;</span><br><span class="line">        T item = m_List[index];</span><br><span class="line">        m_Dictionary.Remove(item);</span><br><span class="line">        m_List[index] = <span class="keyword">value</span>;</span><br><span class="line">        m_Dictionary.Add(item, index);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>RemoveAllï¼š</p><ul><li><p><code>Predicate&lt;T&gt; match</code> æ˜¯ä¸€ä¸ªå§”æ‰˜ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªæ–¹æ³•æˆ– Lambda è¡¨è¾¾å¼ï¼Œç”¨æ¥ç¡®å®šæ˜¯å¦ç§»é™¤åˆ—è¡¨ä¸­çš„å…ƒç´ ã€‚</p></li><li><p>ä½œè€…æåˆ°äº†ä¸€ç§å¯èƒ½çš„ä¼˜åŒ–æ–¹æ³•ï¼Œå³å°†éœ€è¦ç§»é™¤çš„å…ƒç´ ç§»åŠ¨åˆ°åˆ—è¡¨çš„æœ«å°¾ï¼Œç„¶åä¸€æ¬¡æ€§è¿›è¡Œç§»é™¤æ“ä½œã€‚è¿™ç§æ–¹æ³•å¯èƒ½å‡å°‘äº†ç§»åŠ¨å…ƒç´ çš„æ¬¡æ•°ï¼Œä½†éœ€è¦é¢å¤–çš„é€»è¾‘æ¥ç®¡ç†ç§»åŠ¨å…ƒç´ å’Œä¸€æ¬¡æ€§ç§»é™¤çš„æ“ä½œã€‚</p></li><li><p>ç°åœ¨çš„å®ç°æ–¹å¼è™½ç„¶ç®€å•ï¼Œä½†å¦‚æœåˆ—è¡¨ä¸­çš„å…ƒç´ è¾ƒå¤šæˆ–è€…é¢‘ç¹è°ƒç”¨ <code>RemoveAll</code> æ–¹æ³•ï¼Œå¯èƒ½ä¼šæˆä¸ºæ€§èƒ½çš„ç“¶é¢ˆã€‚</p></li></ul></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">RemoveAll</span>(<span class="params">Predicate&lt;T&gt; match</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; m_List.Count)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­å…ƒç´ æ˜¯å¦åŒ¹é…ä¼ å…¥çš„å§”æ‰˜ï¼ŒåŒ¹é…åˆ™åˆ é™¤</span></span><br><span class="line">        T item = m_List[i];</span><br><span class="line">        <span class="keyword">if</span> (match(item))</span><br><span class="line">            Remove(item);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            i++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Sort:</p><ul><li>å¯¹å†…éƒ¨åˆ—è¡¨è¿›è¡Œæ’åºï¼Œè¿™ä½¿å¾—æš´éœ²çš„ç´¢å¼•è®¿é—®å™¨ä¹Ÿæ’åºã€‚</li><li>ä½†æ˜¯æ³¨æ„ï¼Œä»»ä½•æ’å…¥æˆ–åˆ é™¤éƒ½å¯ä»¥å†æ¬¡æ‰“ä¹±é›†åˆçš„é¡ºåºã€‚</li><li>ç”±ä¸Šé¢çš„æ’å…¥å’Œåˆ é™¤ä»£ç å¯çŸ¥é“ï¼Œä¼šæ‰“ä¹±æ’åºï¼Œæ‰€ä»¥è¿™ä¸ªå®¹å™¨çš„æ’åºä¸æ˜¯æŒä¹…åŒ–çš„</li></ul></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Sort</span>(<span class="params">Comparison&lt;T&gt; sortLayoutFunction</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å¯èƒ½æœ‰æ›´å¥½çš„æ’åºæ–¹æ³•ï¼Œå¹¶ä½¿å¾—å­—å…¸çš„ç´¢å¼•ä¿æŒæœ€æ–°</span></span><br><span class="line">    m_List.Sort(sortLayoutFunction);</span><br><span class="line">    <span class="comment">// é‡å»ºå­—å…¸çš„ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; m_List.Count; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        T item = m_List[i];</span><br><span class="line">        m_Dictionary[item] = i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">UGUIä¸­ç»§æ‰¿IListå®ç°ç‰¹å®šåŠŸèƒ½çš„å®¹å™¨</summary>
    
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/categories/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/tags/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>UGUIæºç è§£æâ€”â€”UIBehaviour</title>
    <link href="https://azzurebubble.github.io/posts/45311df6.html"/>
    <id>https://azzurebubble.github.io/posts/45311df6.html</id>
    <published>2024-07-15T15:07:52.000Z</published>
    <updated>2024-07-16T14:32:24.539Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>UIBehaviourï¼šæ˜¯æ‰€æœ‰UIç»„ä»¶çš„åŸºç±»ï¼ŒUIç»„ä»¶éƒ½æ˜¯ç›´æ¥æˆ–è€…é—´æ¥ç»§æ‰¿UIBehaviourè¿™ä¸ªæŠ½è±¡ç±»ï¼Œ<font color=red>å®ƒç»§æ‰¿è‡ªMonoBehaviourï¼Œæ‰€ä»¥æ‹¥æœ‰å’ŒUnityç›¸åŒçš„ç”Ÿå‘½å‘¨æœŸã€‚</font></p></blockquote><h4 id="æºç è§£æ">æºç è§£æ</h4><blockquote><p>åªä¼šåœ¨ç‰©ä½“åˆ›å»ºæ—¶æ‰§è¡Œä¸€æ¬¡ ï¼Œä¸Mono Awakeè°ƒç”¨æ—¶æœºå’Œæ¬¡æ•°ä¿æŒä¸€è‡´</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Awake</span>()</span>&#123;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨ç‰©ä½“æ˜¾ç¤ºæ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œä¸Mono OnEnableä¸€è‡´</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnEnable</span>()</span>&#123;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨ç‰©ä½“ç¬¬ä¸€æ¬¡æ¿€æ´»æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œåœ¨Awakeä¹‹åï¼Œç¬¬ä¸€å¸§Updateä¹‹å‰æ‰§è¡Œï¼Œä¸Mono Startä¸€è‡´</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Start</span>()</span>&#123;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨ç‰©ä½“éšè—æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œä¸Mono OnDisable ä¸€è‡´</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnDisable</span>()</span>&#123;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨å½“å‰ç•Œé¢è¢«é”€æ¯æ—¶è°ƒç”¨ä¸€æ¬¡ï¼Œä¸Mono Destroyä¸€è‡´</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnDestroy</span>()</span>&#123;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨ç¼–è¾‘å™¨æ¨¡å¼ä¸‹ï¼šå½“è„šæœ¬è¢«åŠ è½½(ç¦ç”¨æˆ–å¯ç”¨)æˆ–è€…Inspectorçª—å£çš„å€¼å‡ºç°å˜åŒ–çš„æ—¶å€™ä¼šè¢«è°ƒç”¨ï¼Œä½¿ç”¨æ—¶æ·»åŠ #if UNITY_EDITOR</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnValidate</span>()</span>&#123;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨ç¼–è¾‘å™¨æ¨¡å¼ä¸‹ï¼šå½“è„šæœ¬æ¢å¤é»˜è®¤å€¼æ—¶è°ƒç”¨ï¼Œä½¿ç”¨æ—¶æ·»åŠ #if UNITY_EDITOR</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Reset</span>()</span>&#123;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å½“RectTransformå˜åŒ–æ—¶å€™è°ƒç”¨ï¼ŒAnchorsã€Pivotã€Widthã€Heightå˜åŒ–æ—¶è°ƒç”¨ï¼ŒTransformã€Rotationã€Scaleå˜åŒ–æ—¶ä¸è°ƒç”¨</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnRectTransformDimensionsChange</span>()</span>&#123;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨çˆ¶ç‰©ä½“å˜åŒ–ä¹‹å‰è°ƒç”¨</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnBeforeTransformParentChanged</span>()</span>&#123;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨çˆ¶ç‰©ä½“å˜åŒ–ä¹‹åè°ƒç”¨</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnTransformParentChanged</span>()</span>&#123;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨CanvasçŠ¶æ€å˜åŒ–æ—¶è°ƒç”¨ï¼Œæ¯”å¦‚ç¦ç”¨Canvasç»„ä»¶</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnDidApplyAnimationProperties</span>()</span>&#123;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨Canvas Groupå˜åŒ–æ—¶è°ƒç”¨</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnCanvasGroupChanged</span>()</span>&#123;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å½“åº”ç”¨åŠ¨ç”»å±æ€§æ—¶è°ƒç”¨</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnCanvasHierarchyChanged</span>()</span>&#123;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è·å–GameObjectå’ŒComponentæ˜¯å¦å¤„äºæ¿€æ´»çŠ¶æ€</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="built_in">bool</span> <span class="title">IsActive</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> isActiveAndEnabled;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è·å–GameObjectå’ŒComponentæ˜¯å¦è¢«é”€æ¯</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">IsDestroyed</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span> == <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">UIç»„ä»¶çš„åŸºç±»ï¼Œç»§æ‰¿MonoBehaviour</summary>
    
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/categories/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/tags/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>UGUIæºç è§£æâ€”â€”ç›®å½•</title>
    <link href="https://azzurebubble.github.io/posts/42c102bd.html"/>
    <id>https://azzurebubble.github.io/posts/42c102bd.html</id>
    <published>2024-07-05T03:33:56.000Z</published>
    <updated>2024-07-20T09:09:27.058Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://azurebubble.github.io/posts/45311df6.html"><strong>UGUIæºç è§£æâ€”â€”UIBehaviour</strong></a></p><blockquote><p>UIBehaviourï¼šUIç»„ä»¶çš„åŸºç±»ï¼Œç»§æ‰¿MonoBehaviour</p></blockquote><p><a href="https://azurebubble.github.io/posts/ad6295b1.html"><strong>UGUIæºç è§£æâ€”â€”IndexedSet</strong></a></p><blockquote><p>IndexedSetï¼šUGUIä¸­ç»§æ‰¿IListå®ç°ç‰¹å®šåŠŸèƒ½çš„å®¹å™¨</p></blockquote><p><a href="https://azurebubble.github.io/posts/ad6295b1.html"><strong>UGUIæºç è§£æâ€”â€”IndexedSet</strong></a></p><blockquote><p>IndexedSetï¼šUGUIä¸­ç»§æ‰¿IListå®ç°ç‰¹å®šåŠŸèƒ½çš„å®¹å™¨</p></blockquote><p><a href="https://azurebubble.github.io/posts/75a13096.html"><strong>UGUIæºç è§£æâ€”â€”IClipper</strong></a></p><blockquote><p>IClipperï¼šè£å‰ªæ¥å£ï¼ˆè£å‰ªè€…ï¼‰</p></blockquote><p><a href="https://azurebubble.github.io/posts/c266fbd7.html"><strong>UGUIæºç è§£æâ€”â€”ClipperRegistry</strong></a></p><blockquote><p>ClipperRegistryï¼šä¸€ä¸ªè£å‰ªæ³¨å†Œå™¨å•ä¾‹</p></blockquote><p><a href="https://azurebubble.github.io/posts/6dcd3730.html"><strong>UGUIæºç è§£æâ€”â€”CanvasUpdateRegistry</strong></a></p><blockquote><p>CanvasUpdateRegistryï¼šå›¾åƒã€å¸ƒå±€é‡å»ºæ³¨å†Œå™¨</p></blockquote><p><a href="https://azurebubble.github.io/posts/2f5dfff6.html"><strong>UGUIæºç è§£æâ€”â€”ILayoutElement</strong></a></p><blockquote><p>ILayoutElementï¼šæŒ‚è½½äº†å®ç°ILayoutElementçš„ç»„ä»¶çš„å¯¹è±¡è¢«è§†ä¸ºä¸€ä¸ªå¸ƒå±€å…ƒç´ ï¼Œå¸ƒå±€å…ƒç´ ä¸ç›´æ¥è®¾ç½®å¸ƒå±€ï¼Œåªè®¡ç®—è‡ªèº«å±æ€§ï¼Œè®¾ç½®å¸ƒå±€ç”±å¸ƒå±€æ§åˆ¶å™¨è®¾ç½®</p></blockquote><p><a href="https://azurebubble.github.io/posts/21b56f8.html"><strong>UGUIæºç è§£æâ€”â€”ILayoutController</strong></a></p><blockquote><p>ILayoutControllerï¼šæŒ‚è½½äº†å®ç°ILayoutControllerçš„ç»„ä»¶çš„å¯¹è±¡è¢«è§†ä¸ºä¸€ä¸ªå¸ƒå±€æ§åˆ¶å™¨ï¼Œå¸ƒå±€æ§åˆ¶å™¨ç”¨äºè®¾ç½®å¸ƒå±€ã€‚å¸ƒå±€æ§åˆ¶å™¨å¯åˆ†ä¸ºä¸¤ç§ï¼šæ§åˆ¶è‡ªèº«å’Œæ§åˆ¶å­å¸ƒå±€å…ƒç´ </p></blockquote><p><a href="https://azurebubble.github.io/posts/16a94385.html"><strong>UGUIæºç è§£æâ€”â€”ILayoutGroup</strong></a></p><blockquote><p>ILayoutGroupï¼šç»§æ‰¿è‡ªILayoutControllerï¼ŒæŒ‚è½½äº†å®ç°ILayoutGroupçš„ç»„ä»¶çš„å¯¹è±¡è¢«è§†ä¸ºä¸€ä¸ªå¸ƒå±€æ§åˆ¶å™¨ï¼Œç”¨äºæ§åˆ¶å­å¸ƒå±€å¯¹è±¡ï¼Œä¾‹å¦‚ï¼šHorizontalLayoutGroupã€VerticalLayoutGroupã€GridLayoutGroup</p></blockquote><p><a href="https://azurebubble.github.io/posts/8ae908f0.html"><strong>UGUIæºç è§£æâ€”â€”ILayoutSelfController</strong></a></p><blockquote><p>ILayoutSelfControllerï¼šç»§æ‰¿è‡ªILayoutController(å¸ƒå±€æ§åˆ¶å™¨)ï¼ŒæŒ‚è½½äº†å®ç°ILayoutSelfControllerçš„ç»„ä»¶çš„å¯¹è±¡è¢«è§†ä¸ºä¸€ä¸ªå¸ƒå±€æ§åˆ¶å™¨ï¼Œç”¨äºæ§åˆ¶è‡ªèº«å¸ƒå±€å¯¹è±¡ï¼Œä¾‹å¦‚ï¼šContentSizeFitterã€AspectRatioFitter</p></blockquote><p><a href="https://azurebubble.github.io/posts/4c1d55d0.html"><strong>UGUIæºç è§£æâ€”â€”ILayoutIgnorer</strong></a></p><blockquote><p>ILayoutIgnorerï¼šæŒ‚è½½äº†å®ç°ILayoutIgnoreræ¥å£çš„ç»„ä»¶å¯¹è±¡å¯ä»¥è®¾ç½®ä¸å—å¸ƒå±€ç³»ç»Ÿæ§åˆ¶ï¼Œä¾‹å¦‚ï¼šLayoutElement</p></blockquote><p><a href="https://azurebubble.github.io/posts/51e1a8f9.html"><strong>UGUIæºç è§£æâ€”â€”LayoutGroup</strong></a></p><blockquote><p>LayoutGroupï¼šLayoutGroupæ˜¯æ§åˆ¶å­å¸ƒå±€å¯¹è±¡ç»„ä»¶çš„åŸºç±»ï¼Œå®ç°äº†ILayoutElementå’ŒILayoutGroupæ¥å£ï¼Œè¯´æ˜å®ƒæ—¢æ˜¯ä¸€ä¸ªå¸ƒå±€å…ƒç´ ä¹Ÿæ˜¯ä¸€ä¸ªå¸ƒå±€æ§åˆ¶å™¨ï¼ŒHorizontalLayoutGroupã€VerticalLayoutGroupã€GridLayoutGroupéƒ½ç»§æ‰¿æˆ–é—´æ¥ç»§æ‰¿äº†æ­¤ç±»</p></blockquote><p><a href="https://azurebubble.github.io/posts/52e926ac.html"><strong>UGUIæºç è§£æâ€”â€”LayoutRebuilder</strong></a></p><blockquote><p>LayoutRebuilderï¼šä¸»è¦è´Ÿè´£å¸ƒå±€çš„åˆ·æ–°(UIå¯¹è±¡ä½ç½®å’Œå¤§å°çš„åˆ·æ–°)</p></blockquote>]]></content>
    
    
    <summary type="html">è¿™æ˜¯ä¸€ç¯‡é˜…è¯»åˆ†æUGUIæºç çš„æ–‡ç« åˆ†äº«ï¼Œæ¬¢è¿å¤§ä½¬æŒ‡æ­£ï¼Œä¸€èµ·å­¦ä¹ </summary>
    
    
    
    <category term="C#" scheme="https://azzurebubble.github.io/categories/C/"/>
    
    <category term="å­¦ä¹ " scheme="https://azzurebubble.github.io/categories/C/%E5%AD%A6%E4%B9%A0/"/>
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/categories/C/%E5%AD%A6%E4%B9%A0/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
    
    <category term="UGUIæºç è§£æ" scheme="https://azzurebubble.github.io/tags/UGUI%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    
    <category term="Unity3D" scheme="https://azzurebubble.github.io/tags/Unity3D/"/>
    
  </entry>
  
  <entry>
    <title>Untiyæ¸¸æˆæ¡†æ¶QZGameFramework</title>
    <link href="https://azzurebubble.github.io/posts/3e60956b.html"/>
    <id>https://azzurebubble.github.io/posts/3e60956b.html</id>
    <published>2024-01-06T10:13:46.000Z</published>
    <updated>2024-07-05T03:39:10.984Z</updated>
    
    <content type="html"><![CDATA[<h3 id="æ¡†æ¶ä»“åº“é“¾æ¥â€”â€”ã€ŠQZGameFrameworkã€‹">æ¡†æ¶ä»“åº“é“¾æ¥â€”â€”<a href="https://github.com/AzureBubble/QZGameFramework"><strong>ã€ŠQZGameFrameworkã€‹</strong></a></h3><blockquote><p>æœ¬æ¡†æ¶çš„åŸºç¡€æ˜¯åœ¨æœ¬äººå‚åŠ å¤šä¸ªé¡¹ç›®ï¼Œå¹¶ä¸”æŸ¥é˜…ç§¯ç´¯äº†å„ç±»ä¼˜ç§€ä»£ç åï¼Œè‡ªå·±æ€»ç»“ä¼˜åŒ–çš„ä¸€ä¸ªè¾ƒä¸ºé€šç”¨ä¸”æ˜“ç”¨çš„ç®€æ˜“æ¸¸æˆæ¡†æ¶ï¼Œå¹¶ä¼šåœ¨æœªæ¥è‡ªæˆ‘èƒ½åŠ›æå‡çš„åŒæ—¶ç»§ç»­ä¼˜åŒ–æ›´æ–°æ­¤æ¡†æ¶ï¼Œç›®æ ‡æ˜¯ä¸€ä¸ªé€‚ç”¨äºæ–°æ‰‹å…¥é—¨å’Œä¸­å°å…¬å¸èŠ‚çº¦æˆæœ¬çš„å‰æä¸‹çš„æ¶µç›–å‰åç«¯Unityæ¸¸æˆæ¡†æ¶(ç›®å‰åç«¯æœåŠ¡å™¨è¿˜åœ¨å­¦ä¹ ä¸­â€¦)ã€‚</p></blockquote><h3 id="Unity-Editor-ç¼–è¾‘å™¨å·¥å…·">Unity Editor ç¼–è¾‘å™¨å·¥å…·</h3><blockquote><p>æœ¬æ¡†æ¶ä¸­çš„å·¥å…·æ˜¯åŸåˆ›+é­”æ”¹å®ç°çš„ã€‚</p></blockquote><h4 id="ExcelTool-â€”â€”-è¯»å–-Excel-é…ç½®è¡¨å·¥å…·">ExcelTool â€”â€” è¯»å– Excel é…ç½®è¡¨å·¥å…·</h4><blockquote><p>ä¸»è¦åŒ…å«ä¸¤ç§è¯»è¡¨æ–¹å¼ï¼šJsonå’ŒBinaryã€‚å¯è‡ªå®šä¹‰å­˜å‚¨è·¯å¾„ã€‚</p><p>é…ç½®è¡¨è§„åˆ™<br>ç¬¬ä¸€è¡Œï¼šå­—æ®µå(å¦‚ä¿®æ”¹è§„åˆ™ï¼Œè¯·æ›´æ”¹ ExcelTool è„šæœ¬ä¸­çš„ BEGIN_VARIABLE_NAME_INDEX å˜é‡)<br>ç¬¬äºŒè¡Œï¼šå­—æ®µç±»å‹(å­—æ®µç±»å‹æ”¯æŒï¼šint,float,bool,string)<br>å¦‚éœ€å¢åŠ æ–°çš„å­—æ®µç±»å‹è¯»å†™è§„åˆ™ï¼Œè¯·åœ¨ä»»åŠ¡åˆ—è¡¨ä¸­æ‰¾åˆ°å¯¹åº”çš„ä½ç½®æ·»åŠ å¯¹åº”å­—æ®µç±»å‹å¤„ç†è§„åˆ™å³å¯<br>(å¦‚ä¿®æ”¹è§„åˆ™ï¼Œè¯·æ›´æ”¹ ExcelTool è„šæœ¬ä¸­çš„ BEGIN_VARIABLE_TYPE_INDEX å˜é‡)<br>ç¬¬ä¸‰è¡Œï¼šä¸»é”®(key)ï¼Œé€šè¿‡keyæ¥æ ‡è¯†å”¯ä¸€ä¸»é”®(Jsonæ–‡ä»¶é»˜è®¤ id ä¸ºä¸»é”®ï¼Œä¸ä»¥è‡ªå®šä¹‰keyä¸ºè§„åˆ™)<br>(å¦‚ä¿®æ”¹è§„åˆ™ï¼Œè¯·æ›´æ”¹ ExcelTool è„šæœ¬ä¸­çš„ BEGIN_KEY_INDEX å˜é‡)<br>ç¬¬å››è¡Œï¼šæè¿°ä¿¡æ¯(å¯é€‰ï¼šå¢åŠ æ³¨é‡Šï¼Œä¾¿äºé˜…è¯»ç†è§£)<br>(å¦‚ä¿®æ”¹è§„åˆ™ï¼Œè¯·æ›´æ”¹ ExcelTool è„šæœ¬ä¸­çš„ BEGIN_DESCRIPTION_INDEX å˜é‡)<br>ç¬¬äº”è¡Œ~ç¬¬nè¡Œï¼šå…·ä½“æ•°æ®ä¿¡æ¯<br>Excel ä¸‹çš„è¡¨åå†³å®šæ•°æ®ç»“æ„ç±»åï¼Œå®¹å™¨ç±»åï¼ŒäºŒè¿›åˆ¶æ–‡ä»¶å<br>(å¦‚ä¿®æ”¹è§„åˆ™ï¼Œè¯·æ›´æ”¹ ExcelTool è„šæœ¬ä¸­çš„ BEGIN_INDEX å˜é‡)</p><p>ç›®å‰åªæ”¯æŒintã€floatã€boolã€stringå››ç§æ•°æ®ç±»å‹é…ç½®è¡¨è¯»å–ï¼Œå¦‚éœ€å¢åŠ ï¼Œå¯ç›´æ¥æ‰“å¼€ExcelToolè„šæœ¬æ‰¾åˆ°TODOä»»åŠ¡åˆ—è¡¨æ·»åŠ å³å¯ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/AzureBubble/PicBed@main/QZGameFramework/ExcelTool1.png" alt="ExcelTool1"></p><h4 id="ABTool-â€”â€”-èµ„æºæœåŠ¡å™¨ABåŒ…ä¸Šä¼ å·¥å…·">ABTool â€”â€” èµ„æºæœåŠ¡å™¨ABåŒ…ä¸Šä¼ å·¥å…·</h4><blockquote><p>æœ¬å·¥å…·æä¾›äº†ABåŒ…ä¸€é”®ä¸Šä¼ ABèµ„æºæ–‡ä»¶åˆ°æŒ‡å®šèµ„æºæœåŠ¡å™¨ã€‚ä½¿ç”¨çš„æ˜¯MD5ç åŠ å¯†ç”Ÿæˆçš„ABåŒ…å¯¹æ¯”æ–‡ä»¶ã€‚ä¸‹è½½é…åˆä½¿ç”¨ABUpdateMgrè„šæœ¬ä½¿ç”¨å³å¯ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/AzureBubble/PicBed@main/QZGameFramework/ABTool1.png" alt="ABTool1"></p><h4 id="LuaTool-â€”â€”-Luaè„šæœ¬ä¸€é”®ç”Ÿæˆtxtåç¼€å¹¶ç§»åŠ¨åˆ°æŒ‡å®šABåŒ…å’Œæ–‡ä»¶å¤¹å·¥å…·">LuaTool â€”â€” Luaè„šæœ¬ä¸€é”®ç”Ÿæˆtxtåç¼€å¹¶ç§»åŠ¨åˆ°æŒ‡å®šABåŒ…å’Œæ–‡ä»¶å¤¹å·¥å…·</h4><blockquote><p>æœ¬å·¥å…·æ˜¯ä¸ºäº†æ–¹ä¾¿Luaæ–‡ä»¶çš„è¿ç§»ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/AzureBubble/PicBed@main/QZGameFramework/LuaTool1.png" alt="LuaTool1"></p><h4 id="DialogueTool-â€”â€”-å¯¹è¯æ ‘ç¼–è¾‘å™¨å·¥å…·">DialogueTool â€”â€” å¯¹è¯æ ‘ç¼–è¾‘å™¨å·¥å…·</h4><blockquote><p>åˆ©ç”¨æ ‘çš„ç‰¹æ€§å’ŒUIToolkitç¼–å†™çš„ä¸€ä¸ªå¯¹è¯æ ‘æ’ä»¶ï¼Œå¿«é€Ÿç¼–è¾‘å‰§æƒ…å¯¹è¯åˆ†æ”¯ã€‚å¯¹åº”çš„æ¯ä¸ªèŠ‚ç‚¹çš„å…·ä½“è¡Œä¸ºé€»è¾‘ï¼Œç»§æ‰¿é¡ºåºèŠ‚ç‚¹å’Œåˆ†æ”¯èŠ‚ç‚¹çš„åŸºç±»é‡å†™å¯¹åº”æ–¹æ³•å³å¯ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/AzureBubble/PicBed@main/QZGameFramework/DialogueTreeTool.png" alt="DialogueTreeTool"></p><p><img src="https://cdn.jsdelivr.net/gh/AzureBubble/PicBed@main/QZGameFramework/DialogueTreeTool1.png" alt="DialogueTreeTool"></p><p><img src="https://cdn.jsdelivr.net/gh/AzureBubble/PicBed@main/QZGameFramework/DialogueTreeTool2.png" alt="DialogueTreeTool"></p><h4 id="BehaviourTreeTool-â€”â€”-è¡Œä¸ºæ ‘ç¼–è¾‘å™¨">BehaviourTreeTool â€”â€” è¡Œä¸ºæ ‘ç¼–è¾‘å™¨</h4><blockquote><p>ä¸€ä¸ªç®€å•çš„å¯è§†åŒ–è¡Œä¸ºæ ‘ç¼–è¾‘å™¨å·¥å…·ï¼Œè‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œåªéœ€è¦ç»§æ‰¿æŒ‡å®šçš„Actionç±»ï¼Œdecorationç­‰èŠ‚ç‚¹ç±»å³å¯ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/AzureBubble/PicBed@main/QZGameFramework/BehaviourTool1.png" alt="BehaviourTool"></p><p><img src="https://cdn.jsdelivr.net/gh/AzureBubble/PicBed@main/QZGameFramework/BehaviourTool2.png" alt="BehaviourTool"></p><p><img src="https://cdn.jsdelivr.net/gh/AzureBubble/PicBed@main/QZGameFramework/BehaviourTool3.png" alt="BehaviourTool"></p><h3 id="Unityæ¡†æ¶">Unityæ¡†æ¶</h3><h4 id="æˆå°±ç®¡ç†å™¨">æˆå°±ç®¡ç†å™¨</h4><blockquote><p>ä¸€ä¸ªç®€æ˜“çš„ä½¿ç”¨è§‚å¯Ÿè€…å®ç°çš„æˆå°±ç³»ç»Ÿï¼Œå¾…å®Œå–„ã€‚</p></blockquote><h4 id="äº‹ä»¶ä¸­å¿ƒæ¨¡å—">äº‹ä»¶ä¸­å¿ƒæ¨¡å—</h4><blockquote><p>åˆ†å‘æ¶ˆæ¯</p></blockquote><h4 id="æœ‰é™çŠ¶æ€æœºæ¨¡å—">æœ‰é™çŠ¶æ€æœºæ¨¡å—</h4><blockquote><p>é€šç”¨çš„FSMç³»ç»Ÿï¼šçŠ¶æ€åŒ…å«ä¸€ä¸ªæ•°æ®é»‘æ¿ã€‚</p></blockquote><h4 id="è¾“å…¥ç³»ç»Ÿ">è¾“å…¥ç³»ç»Ÿ</h4><blockquote><p>å‘½ä»¤æ¨¡å¼å®ç°çš„ä¸€ä¸ªæ—§è¾“å…¥ç³»ç»Ÿç›‘å¬æ“çºµã€‚</p></blockquote><h4 id="èƒŒåŒ…ç³»ç»Ÿ">èƒŒåŒ…ç³»ç»Ÿ</h4><blockquote><p>å¾…å®Œå–„</p></blockquote><h4 id="éŸ³ä¹ç®¡ç†ç³»ç»Ÿ">éŸ³ä¹ç®¡ç†ç³»ç»Ÿ</h4><blockquote><p>ç»“åˆå¯¹è±¡æ± å’Œèµ„æºåŠ è½½æ¨¡å—å®ç°çš„éŸ³ä¹ç®¡ç†å™¨</p></blockquote><h4 id="å¯¹è±¡æ± æ¨¡å—">å¯¹è±¡æ± æ¨¡å—</h4><blockquote></blockquote><h4 id="åŒ…ç®¡ç†å™¨æ¨¡å—">åŒ…ç®¡ç†å™¨æ¨¡å—</h4><h4 id="æ•°æ®æŒä¹…åŒ–æ¨¡å—">æ•°æ®æŒä¹…åŒ–æ¨¡å—</h4><h4 id="åœºæ™¯åˆ‡æ¢ç®¡ç†å™¨">åœºæ™¯åˆ‡æ¢ç®¡ç†å™¨</h4><h4 id="å•ä¾‹æ¨¡å¼ç®¡ç†å™¨">å•ä¾‹æ¨¡å¼ç®¡ç†å™¨</h4><blockquote><p>è¿™æ˜¯ä¸€ä¸ªç®¡ç†å…¨å±€æ‰€æœ‰å•ä¾‹çš„æ¨¡å—ï¼šç®¡ç†å…¨å±€æ‰€æœ‰çš„å•ä¾‹ï¼Œç›¸å¯¹äºä¼ ç»Ÿçš„å•ä¾‹æ¨¡å¼åˆ›å»ºï¼Œè¿™æ ·æ›´ä¾¿äºå¯¹å•ä¾‹çš„ç®¡ç†å’Œé”€æ¯ï¼Œä¸”å¦‚æœéœ€è¦è¿›è¡Œå¸§æ›´æ–°çš„å•ä¾‹å¯ä»¥ç»§æ‰¿IUpdateSingletonæ¥å£å³å¯å®ç°å•ä¾‹å¸§æ›´æ–°å‡½æ•°OnUpdateï¼Œä¸”è¿™ä¸ªå¸§æ›´æ–°çš„å•ä¾‹å¯ä»¥å•ç‹¬è®¾ç½®ä¼˜å…ˆçº§ï¼Œæ§åˆ¶å•ä¾‹çš„å¸§æ›´æ–°é¡ºåºã€‚</p></blockquote><h4 id="è‡ªåŠ¨åŒ–UIæ¡†æ¶">è‡ªåŠ¨åŒ–UIæ¡†æ¶</h4><blockquote><p>æ­å»ºå¥½ç•Œé¢åï¼Œä¸€é”®ç”Ÿæˆé€šç”¨UIçª—å£è„šæœ¬å’ŒUIå…ƒç´ è„šæœ¬å¹¶æŒ‚è½½åœ¨çª—å£GameObjectä¸Š</p></blockquote><h4 id="Timerè®¡æ—¶å™¨">Timerè®¡æ—¶å™¨</h4><h4 id="SceneNameç‰¹æ€§">SceneNameç‰¹æ€§</h4><blockquote><p>[SceneName]ç‰¹æ€§æ ‡è®°stringå˜é‡ï¼Œå¯å¿«é€Ÿåœ¨Inspectorçª—å£é€šè¿‡ä¸‹æ‹‰æ¡†é€‰æ‹©åœºæ™¯</p></blockquote><h4 id="ReadOnlyç‰¹æ€§">ReadOnlyç‰¹æ€§</h4><blockquote><p>ç¼–è¾‘åœ¨Inspectoræ˜¾ç¤ºä½†åªè¯»çš„å˜é‡å±æ€§ï¼Œå¯é€šè¿‡åé¢çš„å•é€‰æ¡†å¼€å¯å…³é—­åªè¯»ç»˜åˆ¶ã€‚</p></blockquote>]]></content>
    
    
    <summary type="html">è¿™æ˜¯ä¸€ä¸ªè‡ªç ”æ¡†æ¶ï¼Œç›®å‰é€‚ç”¨å¤§éƒ¨åˆ†Unityæ¸¸æˆå¼€å‘ï¼Œæ¬ ç¼ºABåŒ…æ¨¡å—å’Œçƒ­æ›´æ¨¡å—ã€‚</summary>
    
    
    
    <category term="æ¡†æ¶æ­å»º" scheme="https://azzurebubble.github.io/categories/%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA/"/>
    
    <category term="C#" scheme="https://azzurebubble.github.io/categories/%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA/C/"/>
    
    <category term="Unityæ¡†æ¶" scheme="https://azzurebubble.github.io/categories/%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA/C/Unity%E6%A1%86%E6%9E%B6/"/>
    
    
    <category term="Unity3D" scheme="https://azzurebubble.github.io/tags/Unity3D/"/>
    
    <category term="C#" scheme="https://azzurebubble.github.io/tags/C/"/>
    
    <category term="æ¸¸æˆæ¡†æ¶" scheme="https://azzurebubble.github.io/tags/%E6%B8%B8%E6%88%8F%E6%A1%86%E6%9E%B6/"/>
    
  </entry>
  
  <entry>
    <title>UnityEdior</title>
    <link href="https://azzurebubble.github.io/posts/ec874c57.html"/>
    <id>https://azzurebubble.github.io/posts/ec874c57.html</id>
    <published>2023-12-06T00:56:01.000Z</published>
    <updated>2024-04-20T01:10:48.249Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/AzureBubble/PicBed@main/UnityEditor/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F%E5%8A%A8%E5%9B%BE.gif" alt="æ’å…¥æ’åº"></p><blockquote><p>UnityEditorç¼–è¾‘å™¨çš„ä»£ç å¿…é¡»æ”¾åœ¨Editoræ–‡ä»¶å¤¹ä¸‹ï¼Œå› ä¸ºè¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„ä»£ç æ˜¯ä¸ä¼šè¢«æ‰“åŒ…å‡ºå»ï¼Œåªå…è®¸ç¨‹åºå‘˜åœ¨Unityç¼–è¾‘å™¨ä¸‹ä½¿ç”¨ï¼Œå¦‚æœä¸æ”¾åœ¨Editorè¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰“åŒ…æ—¶è‹¥åŒ…å«UnityEditorçš„ä»£ç ï¼Œä¼šæŠ¥é”™ã€‚</p></blockquote><h4 id="MenuItem">MenuItem</h4><h5 id="1-ä½¿ç”¨æ–¹æ³•-MenuItem-â€œpathâ€">1.ä½¿ç”¨æ–¹æ³•:[MenuItem(â€œpathâ€)]</h5><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">EditorExtensions</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MenuItemExample</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// [MenuItem()] ä¿®é¥°çš„å¿…é¡»æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•</span></span><br><span class="line">        <span class="comment">// æ‰ä¼šåœ¨Unityèœå•æ å‡ºç°å…ˆå¯¹åº”çš„æŒ‰é”®</span></span><br><span class="line">        <span class="comment">// ()æ‹¬å·é‡Œçš„æ˜¯è¿™ä¸ªæ–¹æ³•åœ¨èœå•æ çš„æ ‘å½¢è·¯å¾„</span></span><br><span class="line">        [<span class="meta">MenuItem(<span class="string">&quot;EditorExtensions/MenuItem/EditorTest&quot;</span>)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">EditorTest</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            Debug.Log(<span class="string">&quot;Hello Editor&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2-Application-OpenURL-â€œpathâ€-æ‰“å¼€ä¸€ä¸ªç½‘å€æˆ–è€…ä¸€ä¸ªApplicationåº”ç”¨">2.Application.OpenURL(â€œpathâ€) æ‰“å¼€ä¸€ä¸ªç½‘å€æˆ–è€…ä¸€ä¸ªApplicationåº”ç”¨</h5><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">MenuItem(<span class="string">&quot;EditorExtensions/MenuItem/OpenBilibili&quot;</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">OpenBilibili</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å¯ä»¥é€šè¿‡è¿™ä¸ªApiæ¥å£æ‰“å¼€ä¸€ä¸ªç½‘å€æˆ–è€…ä¸€ä¸ªApplicationåº”ç”¨</span></span><br><span class="line">    Application.OpenURL(<span class="string">&quot;Http://bilibili.com&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="3-EditorUtility-RevealInFinder-â€œpathâ€-æ‰“å¼€ä¸€ä¸ªæŒ‡å®šçš„æ–‡ä»¶ç›®å½•">3.EditorUtility.RevealInFinder(â€œpathâ€) æ‰“å¼€ä¸€ä¸ªæŒ‡å®šçš„æ–‡ä»¶ç›®å½•</h5><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">MenuItem(<span class="string">&quot;EditorExtensions/MenuItem/æ‰“å¼€ç­–åˆ’ç›®å½•&quot;</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">OpenDesignFolder</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æ‰“å¼€ä¸€ä¸ªæŒ‡å®šçš„æ–‡ä»¶ç›®å½• å‚æ•°æ˜¯ä¸€ä¸ªæ–‡ä»¶çš„è·¯å¾„</span></span><br><span class="line">    EditorUtility.RevealInFinder(Application.dataPath.Replace(<span class="string">&quot;Assets&quot;</span>, <span class="string">&quot;Library&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="4-Menu-SetChecked-â€œpathâ€-isChecked-å¯å‹¾é€‰çš„èœå•æ ">4.Menu.SetChecked(â€œpathâ€,isChecked) å¯å‹¾é€‰çš„èœå•æ </h5><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">bool</span> openShotCut = <span class="literal">false</span>; <span class="comment">// è®°å½•èœå•æ å‹¾é€‰çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line">[<span class="meta">MenuItem(<span class="string">&quot;EditorExtensions/MenuItem/å¿«æ·é”®å¼€å…³&quot;</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ToggleShotCut</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    openShotCut = !openShotCut; <span class="comment">// åˆ‡æ¢çŠ¶æ€</span></span><br><span class="line">    Menu.SetChecked(<span class="string">&quot;EditorExtensions/MenuItem/å¿«æ·é”®å¼€å…³&quot;</span>, openShotCut);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="5-MenuItemçš„å¿«æ·é”®è®¾ç½®">5.MenuItemçš„å¿«æ·é”®è®¾ç½®</h5><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">MenuItem(<span class="string">&quot;EditorExtensions/MenuItem/EditorTestWithShotCut _c&quot;</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">EditorTestWithShotCut</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å¸¸ç”¨å¿«æ·é”®ç </span></span><br><span class="line">    <span class="comment">// # -&gt; Shift &amp; -&gt; Alt % -&gt; Ctrl/Command</span></span><br><span class="line">    <span class="comment">// _a-z A-Z - a-z A-Z</span></span><br><span class="line">    Debug.Log(<span class="string">&quot;é”®ç›˜Cé”®çš„å¿«æ·é”®å‘¼å‡ºèœå•&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[<span class="meta">MenuItem(<span class="string">&quot;EditorExtensions/MenuItem/OpenBilibiliWithShotCut %#e&quot;</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">OpenBilibiliWithShotCut</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    EditorUtility.RevealInFinder(Application.persistentDataPath);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="6-MenuItem-â€œpathâ€-validate-true">6.[MenuItem(â€œpathâ€, validate = true)]</h5><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">bool</span> openShotCut = <span class="literal">false</span>; <span class="comment">// è®°å½•èœå•æ å‹¾é€‰çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line">[<span class="meta">MenuItem(<span class="string">&quot;EditorExtensions/MenuItem/å¿«æ·é”®å¼€å…³&quot;</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ToggleShotCut</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    openShotCut = !openShotCut; <span class="comment">// åˆ‡æ¢çŠ¶æ€</span></span><br><span class="line">    Menu.SetChecked(<span class="string">&quot;EditorExtensions/MenuItem/å¿«æ·é”®å¼€å…³&quot;</span>, openShotCut);</span><br><span class="line">&#125;</span><br><span class="line">[<span class="meta">MenuItem(<span class="string">&quot;EditorExtensions/MenuItem/EditorTestWithShotCut _c&quot;</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">EditorTestWithShotCut</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å¸¸ç”¨å¿«æ·é”®ç </span></span><br><span class="line">    <span class="comment">// # -&gt; Shift &amp; -&gt; Alt % -&gt; Ctrl/Command</span></span><br><span class="line">    <span class="comment">// _a-z A-Z - a-z A-Z</span></span><br><span class="line">    Debug.Log(<span class="string">&quot;é”®ç›˜Cé”®çš„å¿«æ·é”®å‘¼å‡ºèœå•&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// openShotCut ä¸ºtrueæ—¶æ‰èƒ½è¢«ä½¿ç”¨</span></span><br><span class="line">[<span class="meta">MenuItem(<span class="string">&quot;EditorExtensions/MenuItem/EditorTestWithShotCut %#e&quot;</span>, validate = true)</span>]</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">EditorTestWithShotCutValidate</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> openShotCut;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[<span class="meta">MenuItem(<span class="string">&quot;EditorExtensions/MenuItem/OpenBilibiliWithShotCut %#e&quot;</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">OpenBilibiliWithShotCut</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    EditorUtility.RevealInFinder(Application.persistentDataPath);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[<span class="meta">MenuItem(<span class="string">&quot;EditorExtensions/MenuItem/OpenBilibiliWithShotCut %#e&quot;</span>, validate = true)</span>]</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">OpenBilibiliWithShotCutValidate</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> openShotCut;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="7-EditorApplication-ExecuteMenuItem-â€œåŒåpathâ€-å¤ç”¨MenuItem">7. EditorApplication.ExecuteMenuItem(â€œåŒåpathâ€) å¤ç”¨MenuItem</h5><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">MenuItem(<span class="string">&quot;EditorExtensions/MenuItem/EditorTestWithShotCut _c&quot;</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">EditorTestWithShotCut</span>()</span></span><br><span class="line">&#123;</span><br><span class="line"> EditorApplication.ExecuteMenuItem(<span class="string">&quot;EditorExtensions/MenuItem/EditorTest&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="EditorWindow">EditorWindow</h4><h5 id="1-ç»˜åˆ¶ä¸€ä¸ªç¼–è¾‘å™¨çª—å£">1.ç»˜åˆ¶ä¸€ä¸ªç¼–è¾‘å™¨çª—å£</h5><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">MenuItem(<span class="string">&quot;EditorExtensions/IMGUI/OpenGUILayoutExample&quot;</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">OpenGUILayoutExample</span>()</span></span><br><span class="line">&#123;</span><br><span class="line"> GUILayoutExample window = GetWindow&lt;GUILayoutExample&gt;();</span><br><span class="line"> window.Show();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnGUI</span>()</span></span><br><span class="line">&#123;</span><br><span class="line"> GUILayout.Label(<span class="string">&quot;Hello IMGUI&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/AzureBubble/PicBed@main/UnityEditor/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F%E5%8A%A8%E5%9B%BE.gif&quot; alt</summary>
      
    
    
    
    <category term="å­¦ä¹ ç¬”è®°" scheme="https://azzurebubble.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="C#" scheme="https://azzurebubble.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C/"/>
    
    <category term="Unity" scheme="https://azzurebubble.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C/Unity/"/>
    
    
    <category term="Unity" scheme="https://azzurebubble.github.io/tags/Unity/"/>
    
    <category term="C#" scheme="https://azzurebubble.github.io/tags/C/"/>
    
    <category term="UnityEditor" scheme="https://azzurebubble.github.io/tags/UnityEditor/"/>
    
  </entry>
  
  <entry>
    <title>ç®—æ³•â€”â€”æœ€çŸ­è·¯å¾„ç®—æ³•</title>
    <link href="https://azzurebubble.github.io/posts/17cfe08f.html"/>
    <id>https://azzurebubble.github.io/posts/17cfe08f.html</id>
    <published>2023-08-01T12:45:09.000Z</published>
    <updated>2024-04-20T01:10:50.275Z</updated>
    
    
    
    
    <category term="å­¦ä¹ ç¬”è®°" scheme="https://azzurebubble.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="C#" scheme="https://azzurebubble.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C/"/>
    
    <category term="æœ€çŸ­è·¯å¾„ç®—æ³•" scheme="https://azzurebubble.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C/%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="C#" scheme="https://azzurebubble.github.io/tags/C/"/>
    
    <category term="æœ€çŸ­è·¯å¾„ç®—æ³•" scheme="https://azzurebubble.github.io/tags/%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>ç®—æ³•â€”â€”æœ€å°ç”Ÿæˆæ ‘ç®—æ³•</title>
    <link href="https://azzurebubble.github.io/posts/3cf1d1bf.html"/>
    <id>https://azzurebubble.github.io/posts/3cf1d1bf.html</id>
    <published>2023-08-01T12:44:34.000Z</published>
    <updated>2024-04-20T01:10:50.274Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>çº¿æ€§è¡¨</strong>ï¼šç”±åŒç§æ•°æ®ç±»å‹çš„æ•°æ®å…ƒç´ ç»„æˆçš„æœ‰åºåºåˆ—ã€‚ä¸€èˆ¬ç”¨äºå­˜å‚¨ç”±é¡ºåºå…³ç³»çš„æ•°æ®åºåˆ—ã€‚</p><p><strong>æ ‘</strong>ï¼šæ ‘å­˜å‚¨ç»“æ„ä¸å…è®¸å­˜åœ¨ç¯è·¯ã€‚</p><p><strong>å›¾</strong>ï¼šå›¾å­˜å‚¨ç»“æ„ä¸­å¯ä»¥å­˜åœ¨ç¯è·¯ã€‚</p><p><strong>è¿é€šå›¾</strong>ï¼šä»ä»»ä¸€é¡¶ç‚¹åˆ°å¦ä¸€ä¸ªé¡¶ç‚¹éƒ½è‡³å°‘å­˜åœ¨ä¸€æ¡é€šè·¯ã€‚</p><p><strong>éè¿é€šå›¾</strong>ï¼šåªè¦æœ‰æŸä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´æ‰¾ä¸åˆ°é€šè·¯ã€‚</p><p><strong>ç”Ÿæˆæ ‘</strong>ï¼šåŒ…å«å›¾ä¸­æ‰€æœ‰çš„é¡¶ç‚¹ã€‚ä»»æ„é¡¶ç‚¹ä¹‹é—´æœ‰ä¸”ä»…æœ‰ä¸€æ¡é€šè·¯ã€‚</p><p><strong>æœ€å°ç”Ÿæˆæ ‘</strong>ï¼šæŒ‡çš„å°±æ˜¯åœ¨è¿é€šç½‘ä¸­æ‰¾åˆ°çš„æ€»æƒå€¼æœ€å°çš„ç”Ÿæˆæ ‘ã€‚å¸¸ç”¨çš„ä¸¤ç§ç®—æ³•ï¼š</p><ul><li><strong>æ™®é‡Œå§†ï¼ˆPrimï¼‰ç®—æ³•</strong></li><li><strong>å…‹é²æ–¯å¡å°”ï¼ˆkruskalï¼‰ç®—æ³•</strong></li></ul></blockquote><h4 id="æ™®é‡Œå§†ï¼ˆPrimï¼‰ç®—æ³•">æ™®é‡Œå§†ï¼ˆPrimï¼‰ç®—æ³•</h4><blockquote><p><strong>æ™®é‡Œå§†ï¼ˆPrimï¼‰ç®—æ³•</strong>ï¼šä»»é€‰ä¸€ä¸ªé¡¶ç‚¹å‡ºå‘ï¼Œæ¯æ¬¡éƒ½é€‰æƒå€¼æœ€å°çš„è¾¹çš„é¡¶ç‚¹ä¸åŸé¡¶ç‚¹ç›¸è¿ã€‚</p><p>é‡‡ç”¨çš„æ˜¯è´ªå¿ƒç®—æ³•çš„æ€æƒ³ã€‚</p><ul><li>æ—¶é—´å¤æ‚åº¦=O(n<sup>2</sup>)ï¼ˆn ä¸ºé¡¶ç‚¹æ•°ï¼‰</li><li>é€‚ç”¨äº<strong>ç¨ å¯†å›¾</strong>ï¼Œç®—æ³•æ€æƒ³æ˜¯é€‰æ‹©<strong>ç‚¹</strong></li></ul><p><strong>å®ç°æ€è·¯ï¼š</strong></p><ol><li>å°†è¿é€šç½‘ä¸­çš„æ‰€æœ‰é¡¶ç‚¹åˆ†ä¸ºä¸¤ç±»ï¼ˆå‡è®¾ä¸º A ç±»å’Œ B ç±»ï¼‰ã€‚åˆå§‹çŠ¶æ€ä¸‹ï¼Œæ‰€æœ‰é¡¶ç‚¹ä½äº B ç±»ï¼›</li><li>é€‰æ‹©ä»»æ„ä¸€ä¸ªé¡¶ç‚¹ï¼Œå°†å…¶ä» B ç±»ç§»åŠ¨åˆ° A ç±»ï¼›</li><li>ä» B ç±»çš„æ‰€æœ‰é¡¶ç‚¹å‡ºå‘ï¼Œæ‰¾å‡ºä¸€æ¡è¿æ¥ç€ A ç±»ä¸­çš„æŸä¸ªé¡¶ç‚¹ä¸”æƒå€¼æœ€å°çš„è¾¹ï¼Œå°†æ­¤è¾¹è¿æ¥ç€çš„ A ç±»ä¸­çš„é¡¶ç‚¹ç§»åŠ¨åˆ° B ç±»ï¼›</li><li>é‡å¤æ‰§è¡Œç¬¬ 3 æ­¥ï¼Œç›´è‡³ B ç±»ä¸­çš„æ‰€æœ‰é¡¶ç‚¹å…¨éƒ¨ç§»åŠ¨åˆ° A ç±»ï¼Œæ°å¥½å¯ä»¥æ‰¾åˆ° N-1 æ¡è¾¹ã€‚</li></ol></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><blockquote></blockquote><hr><h4 id="å…‹é²æ–¯å¡å°”ï¼ˆkruskalï¼‰ç®—æ³•">å…‹é²æ–¯å¡å°”ï¼ˆkruskalï¼‰ç®—æ³•</h4><blockquote><p><strong>å…‹é²æ–¯å¡å°”ï¼ˆkruskalï¼‰ç®—æ³•</strong>ï¼šæŠŠæ‰€æœ‰é¡¶ç‚¹åŒ…å«åœ¨ç”Ÿæˆæ ‘ä¸­ï¼Œå¯¹è¾¹è¿›è¡Œæ’åºï¼Œç„¶åç›´æ¥é€‰å–æƒå€¼æœ€å°çš„è¾¹åŠ å…¥åˆ°æ–°ç”Ÿæˆçš„æ ‘ä¸­ï¼Œé€”ä¸­ä¸èƒ½å½¢æˆç¯ï¼Œç›´åˆ°æ‰€æœ‰é¡¶ç‚¹éƒ½è¿é€šä¸ºæ­¢ã€‚</p><ul><li>æ—¶é—´å¤æ‚åº¦=O(elog<sub>2</sub>e)ï¼ˆe ä¸ºè¾¹æ•°ï¼‰</li><li>é€‚ç”¨äº<strong>ç¨€ç–å›¾</strong>ï¼Œç®—æ³•æ€æƒ³æ˜¯é€‰æ‹©<strong>è¾¹</strong></li></ul></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><blockquote></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;çº¿æ€§è¡¨&lt;/strong&gt;ï¼šç”±åŒç§æ•°æ®ç±»å‹çš„æ•°æ®å…ƒç´ ç»„æˆçš„æœ‰åºåºåˆ—ã€‚ä¸€èˆ¬ç”¨äºå­˜å‚¨ç”±é¡ºåºå…³ç³»çš„æ•°æ®åºåˆ—ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ ‘&lt;/strong&gt;ï¼šæ ‘å­˜å‚¨ç»“æ„ä¸å…è®¸å­˜åœ¨ç¯è·¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å›¾&lt;/strong&gt;</summary>
      
    
    
    
    <category term="å­¦ä¹ ç¬”è®°" scheme="https://azzurebubble.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="C#" scheme="https://azzurebubble.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C/"/>
    
    <category term="æœ€å°ç”Ÿæˆæ ‘ç®—æ³•" scheme="https://azzurebubble.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="C#" scheme="https://azzurebubble.github.io/tags/C/"/>
    
    <category term="æœ€å°ç”Ÿæˆæ ‘ç®—æ³•" scheme="https://azzurebubble.github.io/tags/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>ç®—æ³•â€”â€”æŸ¥æ‰¾ç®—æ³•</title>
    <link href="https://azzurebubble.github.io/posts/f43b98cb.html"/>
    <id>https://azzurebubble.github.io/posts/f43b98cb.html</id>
    <published>2023-08-01T12:43:16.000Z</published>
    <updated>2024-04-20T01:10:50.275Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>æŸ¥æ‰¾</strong>ï¼ˆ<code>Search</code>ï¼‰ï¼šæ˜¯åœ¨ä¸€ä¸ªæ•°æ®é›†åˆä¸­æŸ¥æ‰¾æ»¡è¶³ç»™å®šæ¡ä»¶çš„è®°å½•ã€‚å¯¹äºæŸ¥æ‰¾é—®é¢˜æ¥è¯´ï¼Œæ²¡æœ‰ä¸€ç§ç®—æ³•å¯¹äºä»»ä½•æƒ…å†µä¸‹éƒ½æ˜¯åˆé€‚çš„ã€‚</p><p><strong>æŸ¥æ‰¾è¡¨</strong>ï¼ˆ<code>Search Table</code>ï¼‰ï¼šæ˜¯ç”±åŒä¸€ç±»å‹çš„æ•°æ®å…ƒç´ ï¼ˆæˆ–è®°å½•ï¼‰æ„æˆçš„é›†åˆã€‚å¯¹æŸ¥æ‰¾è¡¨ç»å¸¸è¿›è¡Œçš„æ“ä½œï¼š</p><ol><li>æŸ¥è¯¢æŸä¸ªæ•°æ®å…ƒç´ æ˜¯å¦åœ¨æŸ¥æ‰¾è¡¨ä¸­**ï¼ˆé™æ€æŸ¥æ‰¾è¡¨ï¼‰**</li><li>æ£€ç´¢æŸä¸ªæ•°æ®å…ƒç´ çš„å±æ€§**ï¼ˆé™æ€æŸ¥æ‰¾è¡¨ï¼‰**</li><li>å‘æŸ¥æ‰¾è¡¨ä¸­æ·»åŠ ä¸€ä¸ªæ•°æ®å…ƒç´ **ï¼ˆåŠ¨æ€æŸ¥æ‰¾è¡¨ï¼‰**</li><li>å‘æŸ¥æ‰¾è¡¨ä¸­åˆ é™¤ä¸€ä¸ªæ•°æ®å…ƒç´ **ï¼ˆåŠ¨æ€æŸ¥æ‰¾è¡¨ï¼‰**</li></ol></blockquote><hr><h4 id="é¡ºåºæŸ¥æ‰¾ç®—æ³•">é¡ºåºæŸ¥æ‰¾ç®—æ³•</h4><blockquote><p><strong>é¡ºåºæŸ¥æ‰¾</strong>ï¼šåˆç§°<strong>é¡ºåºæœç´¢ç®—æ³•</strong>æˆ–è€…<strong>çº¿æ€§æœç´¢ç®—æ³•</strong>ï¼Œæ˜¯æ‰€æœ‰æŸ¥æ‰¾ç®—æ³•ä¸­æœ€åŸºæœ¬ã€æœ€ç®€å•çš„ã€‚</p><p><strong>åŸºæœ¬æ€æƒ³</strong>ï¼šä»æŸ¥æ‰¾è¡¨çš„ä¸€ç«¯å¼€å§‹ï¼Œé¡ºåºæ‰«æçº¿æ€§è¡¨ï¼Œé€ä¸ªåŒè®°å½•çš„å…³é”®å­—ä½œæ¯”è¾ƒï¼Œå¦‚æœåŒ¹é…æˆåŠŸï¼Œåˆ™æŸ¥æ‰¾æˆåŠŸï¼›åä¹‹ï¼Œç›´åˆ°æœ€åä¸€ä¸ªå…³é”®å­—éƒ½æ²¡æœ‰åŒ¹é…æˆåŠŸï¼Œåˆ™ä¸ºå¤±è´¥ã€‚</p><ul><li>æ—¶é—´å¤æ‚åº¦=O(n)ï¼Œç©ºé—´å¤æ‚åº¦=O(1)ï¼›æœ€å¥½æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼›</li><li>é€‚ç”¨äºç»å¤§å¤šæ•°åœºæ™¯ï¼Œæ—¢å¯ä»¥åœ¨æœ‰åºåºåˆ—ä¸­æŸ¥æ‰¾ç›®æ ‡å…ƒç´ ï¼Œä¹Ÿå¯ä»¥åœ¨æ— åºåºåˆ—ä¸­æŸ¥æ‰¾ç›®æ ‡å…ƒç´ ã€‚</li><li>é™æ€æŸ¥æ‰¾è¡¨æ—¢å¯ä»¥ä½¿ç”¨é¡ºåºè¡¨è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é“¾è¡¨ç»“æ„è¡¨ç¤ºã€‚</li><li>ä¼˜ç‚¹ï¼šç®—æ³•ç®€å•è€Œä¸”ä½¿ç”¨é¢å¹¿ã€‚</li><li>ç¼ºç‚¹ï¼šæŸ¥æ‰¾æ•ˆç‡è¾ƒä½ï¼Œç‰¹åˆ«æ˜¯å½“å¾…æŸ¥æ‰¾é›†åˆä¸­å…ƒç´ è¾ƒå¤šæ—¶ï¼Œä¸æ¨èä½¿ç”¨é¡ºåºæŸ¥æ‰¾ã€‚</li></ul></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span>[] arr = <span class="keyword">new</span> <span class="built_in">int</span>[] &#123; <span class="number">10</span>, <span class="number">14</span>, <span class="number">19</span>, <span class="number">26</span>, <span class="number">27</span>, <span class="number">31</span>, <span class="number">33</span>, <span class="number">35</span>, <span class="number">42</span>, <span class="number">44</span> &#125;;</span><br><span class="line">        <span class="built_in">int</span> index = linear_search(arr, <span class="number">33</span>);</span><br><span class="line">        <span class="keyword">if</span> (index != <span class="number">-1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;æŸ¥æ‰¾æˆåŠŸï¼åºåˆ—ä¸ºç¬¬<span class="subst">&#123;index + <span class="number">1</span>&#125;</span>ä¸ªå…ƒç´ &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;æŸ¥æ‰¾å¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">linear_search</span>(<span class="params"><span class="built_in">int</span>[] arr, <span class="built_in">int</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; arr.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i] == <span class="keyword">value</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¾“å‡ºï¼š</p><p>æŸ¥æ‰¾æˆåŠŸï¼åºåˆ—ä¸ºç¬¬7ä¸ªå…ƒç´ </p></blockquote><hr><h4 id="äºŒåˆ†æŸ¥æ‰¾ç®—æ³•">äºŒåˆ†æŸ¥æ‰¾ç®—æ³•</h4><blockquote><p><strong>äºŒåˆ†æŸ¥æ‰¾</strong>ï¼šåˆç§°<strong>æŠ˜åŠæŸ¥æ‰¾ã€äºŒåˆ†æœç´¢ã€æŠ˜åŠæœç´¢</strong>ç­‰ï¼Œæ˜¯åœ¨åˆ†æ²»ç®—æ³•åŸºç¡€ä¸Šè®¾è®¡å‡ºæ¥çš„æŸ¥æ‰¾ç®—æ³•ã€‚</p><p><strong>åŸºæœ¬æ€æƒ³</strong>ï¼šå°†è¡¨ä¸­é—´ä½ç½®è®°å½•çš„å…³é”®å­—ä¸æŸ¥æ‰¾å…³é”®å­—æ¯”è¾ƒï¼Œè‹¥ç›¸ç­‰ï¼Œåˆ™æŸ¥æ‰¾æˆåŠŸï¼›å¦åˆ™åˆ©ç”¨ä¸­é—´ä½ç½®è®°å½•å°†è¡¨åˆ†ä¸ºå‰ã€åä¸¤ä¸ªå­è¡¨ï¼Œå¦‚æœä¸­é—´ä½ç½®è®°å½•çš„å…³é”®å­—å¤§äºæŸ¥æ‰¾å…³é”®å­—ï¼Œåˆ™è¿›ä¸€æ­¥æŸ¥æ‰¾å‰ä¸€å­è¡¨ï¼Œå¦åˆ™è¿›ä¸€æ­¥æŸ¥æ‰¾åä¸€å­è¡¨ã€‚</p><ul><li>æ—¶é—´å¤æ‚åº¦=O(log<sub>2</sub>n)ï¼Œå¾ªç¯æ–¹å¼ï¼šç©ºé—´å¤æ‚åº¦=O(1)ï¼Œé€’å½’æ–¹å¼ï¼šæ—¶é—´å¤æ‚åº¦=O(log<sub>2</sub>n)</li><li>æ•°ç»„å…ƒç´ å¿…é¡»æœ‰åºï¼ŒæŸ¥æ‰¾çš„æ•°å€¼ä¸èƒ½å¤šä¸ªï¼Œåªèƒ½ä¸€ä¸ªã€‚å¿…é¡»é‡‡ç”¨é¡ºåºå­˜å‚¨ç»“æ„ã€‚</li><li>ä¼˜ç‚¹ï¼šæ¯”è¾ƒæ¬¡æ•°å°‘ï¼ŒæŸ¥æ‰¾é€Ÿåº¦å—ï¼Œå¹³å‡æ€§èƒ½å¥½ã€‚</li><li>ç¼ºç‚¹ï¼šå¿…é¡»è¦æ±‚å¾…æŸ¥è¡¨ä¸ºæœ‰åºè¡¨ï¼›æ’å…¥åˆ é™¤å›°éš¾ã€‚</li></ul></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span>[] arr = <span class="keyword">new</span> <span class="built_in">int</span>[] &#123; <span class="number">10</span>, <span class="number">14</span>, <span class="number">19</span>, <span class="number">26</span>, <span class="number">27</span>, <span class="number">31</span>, <span class="number">33</span>, <span class="number">35</span>, <span class="number">42</span>, <span class="number">44</span> &#125;;</span><br><span class="line">        <span class="comment">//int index = binary_search1(arr, 0, 9, 31);</span></span><br><span class="line">        <span class="built_in">int</span> index = binary_search2(arr, <span class="number">0</span>, <span class="number">9</span>, <span class="number">31</span>);</span><br><span class="line">        <span class="keyword">if</span> (index != <span class="number">-1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;æŸ¥æ‰¾æˆåŠŸï¼åºåˆ—ä¸ºç¬¬<span class="subst">&#123;index + <span class="number">1</span>&#125;</span>ä¸ªå…ƒç´ &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;æŸ¥æ‰¾å¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€’å½’</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">binary_search1</span>(<span class="params"><span class="built_in">int</span>[] arr, <span class="built_in">int</span> start, <span class="built_in">int</span> end, <span class="built_in">int</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (start &gt; end) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">int</span> mid = start + (end - start) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">value</span> == arr[mid])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> mid;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">value</span> &lt; arr[mid])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> binary_search1(arr, start, mid - <span class="number">1</span>, <span class="keyword">value</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> binary_search1(arr, mid + <span class="number">1</span>, end, <span class="keyword">value</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éé€’å½’</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">binary_search2</span>(<span class="params"><span class="built_in">int</span>[] arr, <span class="built_in">int</span> start, <span class="built_in">int</span> end, <span class="built_in">int</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> left = start;</span><br><span class="line">        <span class="built_in">int</span> right = end;</span><br><span class="line">        <span class="keyword">while</span> (left &lt;= right)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">int</span> mid = left + (right - left) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (arr[mid] == <span class="keyword">value</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> mid;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">value</span> &lt; arr[mid])</span><br><span class="line">            &#123;</span><br><span class="line">                right = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¾“å‡ºï¼š</p><p>æŸ¥æ‰¾æˆåŠŸï¼åºåˆ—ä¸ºç¬¬6ä¸ªå…ƒç´ </p></blockquote><hr><h4 id="æ’å€¼æŸ¥æ‰¾ç®—æ³•">æ’å€¼æŸ¥æ‰¾ç®—æ³•</h4><blockquote><p><strong>æ’å€¼æŸ¥æ‰¾</strong>ï¼šåˆç§°ä¸º<strong>æ’å€¼æœç´¢ç®—æ³•</strong>ï¼Œæ˜¯åœ¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•çš„åŸºç¡€ä¸Šæ”¹è¿›çš„ä¸€ç§æŸ¥æ‰¾ç®—æ³•ï¼Œå°†æŸ¥æ‰¾ç‚¹çš„é€‰æ‹©æ”¹è¿›ä½è‡ªé€‚åº”é€‰æ‹©ï¼Œæé«˜æŸ¥æ‰¾æ•ˆç‡ã€‚</p><p><strong>åŸºæœ¬æ€æƒ³</strong>ï¼šæ’å€¼æŸ¥æ‰¾ç±»ä¼¼å¹³æ—¶æˆ‘ä»¬æŸ¥å­—å…¸çš„æ—¶å€™ï¼ŒæŸ¥ä¸€ä¸ªä»¥ s å¼€å¤´çš„å•è¯æ—¶ï¼Œç»å¯¹ä¸ä¼šç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œä»å­—å…¸çš„ä¸­é—´ç¬¬ä¸€é¡µå¼€å§‹ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“å®ƒçš„å¤§æ¦‚ä½ç½®æ˜¯åœ¨å­—å…¸çš„è¾ƒåé¢éƒ¨åˆ†ï¼Œæ‰€ä»¥å¯ä»¥ä»åé¢çš„æŸå¤„æŸ¥èµ·ã€‚æˆ‘ä»¬å…ˆä»é¦–å­—æ¯ s çš„åœ°æ–¹å¼€å§‹æŸ¥æ‰¾ï¼Œç„¶åå†æ ¹æ®ç¬¬äºŒä¸ªå­—æ¯åœ¨å­—æ¯è¡¨ä¸­çš„ä½ç½®ï¼Œæ‰¾åˆ°å¯¹åº”ä½ç½®å†ç»§ç»­æŸ¥æ‰¾ï¼Œè¿™æ ·é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æ‰¾åˆ°æˆ‘ä»¬æŸ¥æ‰¾çš„è¿™ä¸ªå•è¯è¿™å°±æ˜¯æ’å€¼æŸ¥æ‰¾çš„åŸºæœ¬æ€æƒ³</p><ul><li>é¡ºåºå­˜å‚¨çš„æœ‰åºæ•°åˆ—ï¼Œæ ¹æ®å…³é”®å­—åœ¨æ•°æ®ä¸­å‡åŒ€åˆ†å¸ƒã€‚</li><li>æ¯”è¾ƒå…ƒç´ çš„ä½ç½®å…¬å¼ï¼š</li></ul><p>$$<br>Mid = Begin + ( (End - Begin) / (A[End] - A[Begin]) ) * (X - A[Begin])<br>$$</p><ul><li>Midï¼šè®¡ç®—å¾—å‡ºçš„å…ƒç´ çš„ä½ç½®ï¼›</li><li>Endï¼šæœç´¢åŒºåŸŸå†…æœ€åä¸€ä¸ªå…ƒç´ æ‰€åœ¨çš„ä½ç½®ï¼›</li><li>Beginï¼šæœç´¢åŒºåŸŸå†…ç¬¬ä¸€ä¸ªå…ƒç´ æ‰€åœ¨çš„ä½ç½®ï¼›</li><li>Xï¼šè¦æŸ¥æ‰¾çš„ç›®æ ‡å…ƒç´ ï¼›</li><li>A[]ï¼šè¡¨ç¤ºæ•´ä¸ªå¾…æœç´¢åºåˆ—ã€‚</li></ul></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span>[] arr = <span class="keyword">new</span> <span class="built_in">int</span>[] &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span> &#125;;</span><br><span class="line">        <span class="built_in">int</span> index = interpolation_search(arr, <span class="number">0</span>, <span class="number">9</span>, <span class="number">5</span>);</span><br><span class="line">        <span class="keyword">if</span> (index != <span class="number">-1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;æŸ¥æ‰¾æˆåŠŸï¼åºåˆ—ä¸ºç¬¬<span class="subst">&#123;index + <span class="number">1</span>&#125;</span>ä¸ªå…ƒç´ &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;æŸ¥æ‰¾å¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">interpolation_search</span>(<span class="params"><span class="built_in">int</span>[] arr, <span class="built_in">int</span> begin, <span class="built_in">int</span> end, <span class="built_in">int</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (begin &gt; end)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚æœæŸ¥æ‰¾è¡¨ä¸­åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™æ¯”è¾ƒè¯¥å…ƒç´ å’Œå¾…æŸ¥å…ƒç´ çš„å€¼</span></span><br><span class="line">        <span class="keyword">if</span> (begin == end)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> arr[begin] == <span class="keyword">value</span> ? begin : <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ ¹æ®å…¬å¼æ‰¾åˆ°ä¸­é—´å…ƒç´ çš„æ‰€åœ¨ä½ç½®</span></span><br><span class="line">        <span class="built_in">int</span> mid = ((end - begin) / (arr[end] - arr[begin]) * (<span class="keyword">value</span> - arr[begin]));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é€’å½’å‡ºå£</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">value</span> == arr[mid])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> mid;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é€’å½’æŸ¥è¯¢</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">value</span> &lt; arr[mid])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> interpolation_search(arr, begin, mid - <span class="number">1</span>, <span class="keyword">value</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> interpolation_search(arr, mid + <span class="number">1</span>, end, <span class="keyword">value</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¾“å‡ºï¼š</p><p>æŸ¥æ‰¾æˆåŠŸï¼åºåˆ—ä¸ºç¬¬5ä¸ªå…ƒç´ </p></blockquote><hr><h4 id="å“ˆå¸ŒæŸ¥æ‰¾ç®—æ³•">å“ˆå¸ŒæŸ¥æ‰¾ç®—æ³•</h4><blockquote><p><strong>å“ˆå¸ŒæŸ¥æ‰¾</strong>ï¼šåˆç§°<strong>æ•£åˆ—æŸ¥æ‰¾ç®—æ³•</strong>ï¼Œæ˜¯ä¸€ç§å€ŸåŠ©å“ˆå¸Œè¡¨ï¼ˆæ•£åˆ—è¡¨ï¼‰æŸ¥æ‰¾ç›®æ ‡å…ƒç´ çš„æ–¹æ³•ï¼ŒæŸ¥æ‰¾æ•ˆç‡æœ€é«˜æ—¶å¯¹åº”çš„æ—¶é—´å¤æ‚åº¦ä½O(2)ã€‚</p><p><strong>å“ˆå¸Œè¡¨</strong>ï¼šåˆç§°æ•£åˆ—è¡¨ï¼Œæ˜¯ä¸€ç§å­˜å‚¨ç»“æ„ï¼Œé€šå¸¸ç”¨æ¥å­˜å‚¨å¤šä¸ªå…ƒç´ ã€‚å’Œå…¶å®ƒå­˜å‚¨ç»“æ„ï¼ˆçº¿æ€§è¡¨ã€æ ‘ç­‰ï¼‰ç›¸æ¯”ï¼Œå“ˆå¸Œè¡¨æŸ¥æ‰¾ç›®æ ‡å…ƒç´ çš„æ•ˆç‡éå¸¸é«˜ã€‚æ¯ä¸ªå­˜å‚¨åˆ°å“ˆå¸Œè¡¨ä¸­çš„å…ƒç´ ï¼Œéƒ½é…æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ï¼ˆåˆç§°â€œç´¢å¼•â€æˆ–è€…â€œé”®â€ï¼‰ï¼Œç”¨æˆ·æƒ³æŸ¥æ‰¾å“ªä¸ªå…ƒç´ ï¼Œå‡­å€Ÿè¯¥å…ƒç´ å¯¹åº”çš„æ ‡è¯†å°±å¯ä»¥ç›´æ¥æ‰¾åˆ°å®ƒï¼Œæ— éœ€éå†æ•´ä¸ªå“ˆå¸Œè¡¨ã€‚</p><ul><li>é€‚ç”¨äºå¤§å¤šæ•°åœºæ™¯ï¼Œæ—¢æ”¯æŒæœ‰åºåºåˆ—ï¼Œä¹Ÿæ”¯æŒæ— åºåºåˆ—ã€‚</li><li>å¸¸è§çš„æ•£åˆ—å‡½æ•°ï¼šç›´æ¥å®šå€æ³•ï¼Œé™¤ç•™ä½™æ•°æ³•ï¼Œå¹³æ–¹å–ä½™æ³•ç­‰</li><li>å¤„ç†å†²çªçš„æ–¹æ³•ï¼šå¼€æ”¾å®šå€æ³•ï¼Œçº¿æ€§æ¢æµ‹æ³•ï¼Œæ‹‰é“¾æ³•ç­‰</li><li>å½±å“å†²çªçš„ä¸»è¦ä¸‰ä¸ªå› ç´ ï¼š<ul><li>æ•£åˆ—å‡½æ•°æ˜¯å¦å‡åŒ€</li><li>å¤„ç†å†²çªçš„æ–¹æ³•</li><li>æ•£åˆ—è¡¨çš„è£…å¡«å› å­</li></ul></li></ul></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span>[] arr = <span class="keyword">new</span> <span class="built_in">int</span>[] &#123; <span class="number">5</span>, <span class="number">30</span>, <span class="number">20</span>, <span class="number">55</span>, <span class="number">50</span> &#125;;</span><br><span class="line">        <span class="built_in">int</span>[] hashArr = <span class="keyword">new</span> <span class="built_in">int</span>[<span class="number">10</span>];</span><br><span class="line">        CreateHash(arr, hashArr);</span><br><span class="line">        <span class="built_in">int</span> index = hash_search(hashArr, <span class="number">20</span>);</span><br><span class="line">        <span class="keyword">if</span> (index != <span class="number">-1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;æŸ¥æ‰¾æˆåŠŸï¼åºåˆ—ä¸ºç¬¬<span class="subst">&#123;index + <span class="number">1</span>&#125;</span>ä¸ªå…ƒç´ &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;æŸ¥æ‰¾å¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å“ˆå¸Œå‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">hash</span>(<span class="params"><span class="built_in">int</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">value</span> % <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºå“ˆå¸Œè¡¨</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">CreateHash</span>(<span class="params"><span class="built_in">int</span>[] arr, <span class="built_in">int</span>[] hashArr</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> i, index;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; arr.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// é€šè¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—å½“å‰å…ƒç´ åœ¨å“ˆå¸Œè¡¨ä¸­çš„ä½ç½®</span></span><br><span class="line">            index = hash(arr[i]);</span><br><span class="line">            <span class="keyword">while</span> (hashArr[index] != <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                index++;</span><br><span class="line">            &#125;</span><br><span class="line">            hashArr[index] = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">hash_search</span>(<span class="params"><span class="built_in">int</span>[] hashArr, <span class="built_in">int</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// é€šè¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—å¾—åˆ°å¾…æŸ¥å…ƒç´ çš„ä¸‹æ ‡</span></span><br><span class="line">        <span class="built_in">int</span> hashIndex = hash(<span class="keyword">value</span>);</span><br><span class="line">        <span class="comment">// å¦‚æœå‘ç”Ÿå†²çªï¼Œåˆ™ä½¿ç”¨çº¿æ€§æ¢æµ‹æ³•å‘åæ¢æµ‹</span></span><br><span class="line">        <span class="keyword">while</span> (hashArr[hashIndex] != <span class="keyword">value</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            hashIndex = (hashIndex + <span class="number">1</span>) % <span class="number">10</span>;</span><br><span class="line">            <span class="comment">// å¦‚æœæ¢æµ‹ä½ç½®ä¸ºç©º</span></span><br><span class="line">            <span class="keyword">if</span> (hashArr[hashIndex] == <span class="number">0</span> || hashIndex == hash(<span class="keyword">value</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> hashIndex;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¾“å‡ºï¼š</p><p>æŸ¥æ‰¾æˆåŠŸï¼åºåˆ—ä¸ºç¬¬2ä¸ªå…ƒç´ </p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥æ‰¾&lt;/strong&gt;ï¼ˆ&lt;code&gt;Search&lt;/code&gt;ï¼‰ï¼šæ˜¯åœ¨ä¸€ä¸ªæ•°æ®é›†åˆä¸­æŸ¥æ‰¾æ»¡è¶³ç»™å®šæ¡ä»¶çš„è®°å½•ã€‚å¯¹äºæŸ¥æ‰¾é—®é¢˜æ¥è¯´ï¼Œæ²¡æœ‰ä¸€ç§ç®—æ³•å¯¹äºä»»ä½•æƒ…å†µä¸‹éƒ½æ˜¯åˆé€‚çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥æ‰¾è¡¨&lt;/strong&gt;ï¼ˆ&lt;code</summary>
      
    
    
    
    <category term="å­¦ä¹ ç¬”è®°" scheme="https://azzurebubble.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="C#" scheme="https://azzurebubble.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C/"/>
    
    <category term="æŸ¥æ‰¾ç®—æ³•" scheme="https://azzurebubble.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C/%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="C#" scheme="https://azzurebubble.github.io/tags/C/"/>
    
    <category term="æŸ¥æ‰¾ç®—æ³•" scheme="https://azzurebubble.github.io/tags/%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>æ’åºç®—æ³•â€”â€”å½’å¹¶/è®¡æ•°/åŸºæ•°/æ¡¶æ’åº</title>
    <link href="https://azzurebubble.github.io/posts/23241932.html"/>
    <id>https://azzurebubble.github.io/posts/23241932.html</id>
    <published>2023-07-28T14:41:30.000Z</published>
    <updated>2024-04-20T01:10:50.268Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å½’å¹¶æ’åº">å½’å¹¶æ’åº</h4><blockquote><p>å½’å¹¶æ’åºï¼šå°†ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„æœ‰åºå­åºåˆ—<code>å½’å¹¶</code>ä¸ºä¸€ä¸ªæœ‰åºåºåˆ—ã€‚åŸºäºåˆ†æ²»æ€æƒ³ã€‚</p><ul><li>æ—¶é—´å¤æ‚åº¦=O(nlog<sub>2</sub>n)ï¼Œç©ºé—´å¤æ‚åº¦=O(n)ã€‚ç¨³å®šæ’åº</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/AzureBubble/PicBed@main/showImg/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F.gif" alt="å½’å¹¶æ’åº"></p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span>[] arr = &#123; <span class="number">5</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">4</span>, <span class="number">2</span> &#125;;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æœªæ’åºå‰çš„æ•°ç»„ï¼š&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; arr.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.Write(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        Console.WriteLine();</span><br><span class="line">        merge_sort(arr, <span class="number">1</span>, <span class="number">8</span>);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æ’åºåçš„æ•°ç»„ï¼š&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; arr.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.Write(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">     <span class="comment">// åˆ†å‰²æ•°ç»„</span></span><br><span class="line">     <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">merge_sort</span>(<span class="params"><span class="built_in">int</span>[] arr,<span class="built_in">int</span> start,<span class="built_in">int</span> end</span>)</span></span><br><span class="line">     &#123;</span><br><span class="line">         <span class="keyword">if</span>(arr == <span class="literal">null</span> || start &gt;= end)</span><br><span class="line">         &#123;</span><br><span class="line">             <span class="keyword">return</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="built_in">int</span> mid = (start + end) / <span class="number">2</span>; <span class="comment">// å–å¾—æ•°ç»„ä¸­é—´å€¼ä¸‹æ ‡</span></span><br><span class="line">         <span class="comment">// ç»§ç»­åˆ†å‰²</span></span><br><span class="line">         merge_sort(arr,start,mid);</span><br><span class="line">         merge_sort(arr,mid + <span class="number">1</span>,end);</span><br><span class="line">         merge(arr,start,mid,end);</span><br><span class="line">     &#125;</span><br><span class="line">     </span><br><span class="line">     <span class="function">privatr <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">merge</span>(<span class="params"><span class="built_in">int</span>[] arr,<span class="built_in">int</span> start,<span class="built_in">int</span> mid,<span class="built_in">int</span> end</span>)<span class="comment">// 1 1 2</span></span></span><br><span class="line">     &#123;</span><br><span class="line">         <span class="built_in">int</span> left = mid - start + <span class="number">1</span>; <span class="comment">// è·å¾—å·¦è¾¹æ•°ç»„å…ƒç´ ä¸ªæ•° </span></span><br><span class="line">         <span class="built_in">int</span> right = end - mid; <span class="comment">// è·å¾—å³è¾¹æ•°ç»„å…ƒç´ ä¸ªæ•° </span></span><br><span class="line">         <span class="built_in">int</span> leftArr = <span class="keyword">new</span> <span class="built_in">int</span>[left + <span class="number">1</span>]; </span><br><span class="line">         <span class="built_in">int</span> rightArr = <span class="keyword">new</span> <span class="built_in">int</span>[right + <span class="number">1</span>]; </span><br><span class="line">         <span class="built_in">int</span> i;</span><br><span class="line">         <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; left; i++)</span><br><span class="line">         &#123;</span><br><span class="line">             leftArr[i] = arr[start - <span class="number">1</span> + i]; </span><br><span class="line">         &#125;</span><br><span class="line">         leftArr[i] = <span class="number">2147483647</span>; <span class="comment">// æŠŠæ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ è®¾ç½®ä¸ºæœ€å¤§å€¼</span></span><br><span class="line">         <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; right; i++)</span><br><span class="line">         &#123;</span><br><span class="line">             rightArr[i] = arr[mid + i];</span><br><span class="line">         &#125;</span><br><span class="line">         leftArr[i] = <span class="number">2147483647</span>; <span class="comment">// æŠŠæ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ è®¾ç½®ä¸ºæœ€å¤§å€¼</span></span><br><span class="line">         <span class="built_in">int</span> j = <span class="number">0</span>;</span><br><span class="line">         i = <span class="number">0</span>;</span><br><span class="line">         <span class="keyword">for</span>(<span class="built_in">int</span> k = start; k &lt; end; k++)</span><br><span class="line">         &#123;</span><br><span class="line">             <span class="keyword">if</span>(leftArr[i] &lt;= rightArr[j])</span><br><span class="line">             &#123;</span><br><span class="line">                 arr[k - <span class="number">1</span>] = leftArr[i];</span><br><span class="line">                 i++;</span><br><span class="line">             &#125;</span><br><span class="line">             <span class="keyword">else</span></span><br><span class="line">             &#123;</span><br><span class="line">                 arr[k - <span class="number">1</span>] = rightArr[j];</span><br><span class="line">                 j++;</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¾“å‡ºï¼š</p><p>æœªæ’åºå‰çš„æ•°ç»„ï¼š<br>5 7 3 8 6 9 4 2<br>æ’åºåçš„æ•°ç»„ï¼š<br>2 3 4 5 6 7 8 9</p></blockquote><hr><h4 id="è®¡æ•°æ’åº">è®¡æ•°æ’åº</h4><blockquote><p>è®¡æ•°æ’åºï¼šé€šè¿‡ç»Ÿè®¡åºåˆ—ä¸­å„ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œå®Œæˆå¯¹æ•´ä¸ªåºåˆ—çš„å‡åºæˆ–é™åºæ’åºã€‚ï¼ˆå…ƒç´ ä¹‹é—´æœ€å¥½æ˜¯åœ¨0~9ä¹‹é—´çš„æ•°å€¼å·®ï¼‰</p><ul><li>æ—¶é—´å¤æ‚åº¦=O(n+k)ï¼Œç©ºé—´å¤æ‚åº¦=O(n+k)ã€‚ç¨³å®šæ’åº</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/AzureBubble/PicBed@main/showImg/%E8%AE%A1%E6%95%B0%E6%8E%92%E5%BA%8F.gif" alt="è®¡æ•°æ’åº"></p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span>[] arr = &#123; <span class="number">2</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">7</span> &#125;;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æœªæ’åºå‰çš„æ•°ç»„ï¼š&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; arr.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.Write(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        Console.WriteLine();</span><br><span class="line">        countingSort(arr);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æ’åºåçš„æ•°ç»„ï¼š&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; arr.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.Write(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">get_max</span>(<span class="params"><span class="built_in">int</span>[] arr</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> max = arr[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt; arr.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i] &gt; max)</span><br><span class="line">            &#123;</span><br><span class="line">                max = arr[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">countingSort</span>(<span class="params"><span class="built_in">int</span>[] arr</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> length = arr.Length;</span><br><span class="line">        <span class="comment">// æ‰¾å‡ºæ•°ç»„ä¸­çš„æœ€å¤§å€¼</span></span><br><span class="line">        <span class="built_in">int</span> max = get_max(arr);</span><br><span class="line">        <span class="built_in">int</span>[] array = <span class="keyword">new</span> <span class="built_in">int</span>[max + <span class="number">1</span>]; <span class="comment">// åˆ›å»ºä¸€ä¸ªç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°çš„æ•°ç»„</span></span><br><span class="line">        <span class="built_in">int</span>[] output = <span class="keyword">new</span> <span class="built_in">int</span>[length]; <span class="comment">// æ’åºæ•°ç»„</span></span><br><span class="line">        <span class="comment">// ç»Ÿè®¡å…ƒç´ å‡ºç°ä¸ªæ•°ï¼Œå­˜å‚¨åœ¨å¯¹åº”çš„ä½ç½®ä¸Š</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            array[arr[i]]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ç´¯åŠ å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt; max + <span class="number">1</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            array[i] += array[i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ ¹æ®æ¬¡æ•°è¿›è¡Œæ’åº</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            output[array[arr[i]] - <span class="number">1</span>] = arr[i];</span><br><span class="line">            array[arr[i]]--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¤åˆ¶åˆ°arræ•°ç»„ä¸­ 2, 4, 1, 2, 5, 3, 4, 8, 7</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            arr[i] = output[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¾“å‡ºï¼š</p><p>æœªæ’åºå‰çš„æ•°ç»„ï¼š<br>2 4 1 2 5 3 4 8 7<br>æ’åºåçš„æ•°ç»„ï¼š<br>1 2 2 3 4 4 5 7 8</p></blockquote><hr><h4 id="åŸºæ•°æ’åº">åŸºæ•°æ’åº</h4><blockquote><p>åŸºæ•°æ’åºï¼šæ•°å­—é€ä½æ¯”è¾ƒã€‚</p><ul><li>æ—¶é—´å¤æ‚åº¦=O(nÃ—m)ï¼Œç©ºé—´å¤æ‚åº¦=O(nÃ—m)ã€‚ç¨³å®šæ’åºã€‚n:æ•°æ®ä¸ªæ•°ï¼Œm:æ•°æ®ä½æ•°ã€‚</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/AzureBubble/PicBed@main/showImg/%E5%9F%BA%E6%95%B0%E6%8E%92%E5%BA%8F.gif" alt="åŸºæ•°æ’åº"></p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span>[] arr = &#123; <span class="number">121</span>, <span class="number">432</span>, <span class="number">564</span>, <span class="number">23</span>, <span class="number">1</span>, <span class="number">45</span>, <span class="number">788</span> &#125;;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æœªæ’åºå‰çš„æ•°ç»„ï¼š&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; arr.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.Write(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        Console.WriteLine();</span><br><span class="line">        radixSort(arr);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æ’åºåçš„æ•°ç»„ï¼š&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; arr.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.Write(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">getMax</span>(<span class="params"><span class="built_in">int</span>[] arr</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> max = arr[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; arr.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i] &gt; max)</span><br><span class="line">            &#123;</span><br><span class="line">                max = arr[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">countingSort</span>(<span class="params"><span class="built_in">int</span>[] arr, <span class="built_in">int</span> place</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> length = arr.Length;</span><br><span class="line">        <span class="built_in">int</span>[] output = <span class="keyword">new</span> <span class="built_in">int</span>[length];</span><br><span class="line"></span><br><span class="line">        <span class="built_in">int</span> max = (arr[<span class="number">0</span>] / place) % <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt; length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (((arr[i] / place) % <span class="number">10</span>) &gt; max)</span><br><span class="line">            &#123;</span><br><span class="line">                max = (arr[i] / place) % <span class="number">10</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">int</span>[] count = <span class="keyword">new</span> <span class="built_in">int</span>[max + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            count[(arr[i] / place) % <span class="number">10</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt; max + <span class="number">1</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            count[i] += count[i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸€å®šè¦ä»åå¾€å‰æ’</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        &#123;</span><br><span class="line">            output[count[(arr[i] / place) % <span class="number">10</span>] - <span class="number">1</span>] = arr[i];</span><br><span class="line">            count[(arr[i] / place) % <span class="number">10</span>]--;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            arr[i] = output[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">radixSort</span>(<span class="params"><span class="built_in">int</span>[] arr</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> max = getMax(arr);</span><br><span class="line">        <span class="comment">// æ ¹æ®æœ€é«˜ä½æ•°ï¼Œä»ä½ä½ä¾æ¬¡è¿›è¡Œè®¡æ•°æ’åº</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">1</span>; max / i &gt; <span class="number">0</span>; i *= <span class="number">10</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            countingSort(arr, i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¾“å‡ºï¼š</p><p>æœªæ’åºå‰çš„æ•°ç»„ï¼š<br>121 432 564 23 1 45 788<br>æ’åºåçš„æ•°ç»„ï¼š<br>1 23 45 121 432 564 788</p></blockquote><hr><h4 id="æ¡¶-ç®±æ’åº">æ¡¶/ç®±æ’åº</h4><blockquote><p>æ¡¶/ç®±æ’åºï¼šå¾…æ’åºæ•°ç»„ï¼Œåˆ†é…åˆ°è‹¥å¹²ä¸ªæ¡¶ï¼Œå„è‡ªæ‰§è¡Œæ’åºä»»åŠ¡ã€‚æ˜¯ä¸€ç§åŸºäºåˆ†æ²»æ€æƒ³ã€æ•ˆç‡å¾ˆé«˜çš„æ’åºç®—æ³•ã€‚(é€‚ç”¨äºæ•°æ®èŒƒå›´è¾ƒå°ä¸”åˆ†å¸ƒå‡åŒ€çš„æµ®ç‚¹æ•°æ•°æ®)</p><ul><li>æ—¶é—´å¤æ‚åº¦=O(n+m+n(logn-logm))ï¼Œç©ºé—´å¤æ‚åº¦=O(n+m)ã€‚ç¨³å®šæ’åºã€‚n:æ•°æ®ä¸ªæ•°ï¼Œm:æ•°æ®ä½æ•°ã€‚</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/AzureBubble/PicBed@main/showImg/%E6%A1%B6%E6%8E%92%E5%BA%8F.gif" alt="æ¡¶æ’åº"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;å½’å¹¶æ’åº&quot;&gt;å½’å¹¶æ’åº&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;å½’å¹¶æ’åºï¼šå°†ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„æœ‰åºå­åºåˆ—&lt;code&gt;å½’å¹¶&lt;/code&gt;ä¸ºä¸€ä¸ªæœ‰åºåºåˆ—ã€‚åŸºäºåˆ†æ²»æ€æƒ³ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ—¶é—´å¤æ‚åº¦=O(nlog&lt;sub&gt;2&lt;/sub&gt;n)ï¼Œç©ºé—´å¤æ‚åº¦=O(n)</summary>
      
    
    
    
    <category term="å­¦ä¹ ç¬”è®°" scheme="https://azzurebubble.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="C#" scheme="https://azzurebubble.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C/"/>
    
    <category term="æ’åºç®—æ³•" scheme="https://azzurebubble.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="C#" scheme="https://azzurebubble.github.io/tags/C/"/>
    
    <category term="æ’åºç®—æ³•" scheme="https://azzurebubble.github.io/tags/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>æ’åºç®—æ³•â€”â€”é€‰æ‹©æ’åº</title>
    <link href="https://azzurebubble.github.io/posts/18d056c9.html"/>
    <id>https://azzurebubble.github.io/posts/18d056c9.html</id>
    <published>2023-07-25T16:08:58.000Z</published>
    <updated>2024-04-20T01:10:50.272Z</updated>
    
    <content type="html"><![CDATA[<h4 id="ç®€å•é€‰æ‹©æ’åº">ç®€å•é€‰æ‹©æ’åº</h4><blockquote><p>ç®€å•é€‰æ‹©æ’åºï¼šåœ¨å¾…æ’åºçš„æ•°æ®ä¸­é€‰å‡ºæœ€å¤§ï¼ˆå°ï¼‰çš„å…ƒç´ æ”¾åœ¨å…¶æœ€ç»ˆçš„ä½ç½®ã€‚</p><ul><li>æ—¶é—´å¤æ‚åº¦=O(n<sup>2</sup>)ï¼Œç©ºé—´å¤æ‚åº¦=O(1)ã€‚ç¨³å®šæ’åºã€‚</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/AzureBubble/PicBed@main/showImg/%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F%E5%8A%A8%E5%9B%BE.gif" alt="é€‰æ‹©æ’åºåŠ¨å›¾"></p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span>[] arr = &#123; <span class="number">5</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">9</span> &#125;;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æœªæ’åºå‰çš„æ•°ç»„ï¼š&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; arr.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.Write(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        Console.WriteLine();</span><br><span class="line">        selection_sort(arr);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æ’åºåçš„æ•°ç»„ï¼š&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; arr.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.Write(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">selection_sort</span>(<span class="params"><span class="built_in">int</span>[] arr</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> length = arr.Length;</span><br><span class="line">        <span class="built_in">int</span> i, j, min;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; length - <span class="number">1</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            min = i; <span class="comment">// æŠŠç¬¬ä¸€ä¸ªå…ƒç´ å‡è®¾ä¸ºæœ€å°</span></span><br><span class="line">            <span class="keyword">for</span> (j = i + <span class="number">1</span>; j &lt; length; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// ä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹éå†åˆ°æœ€åä¸€ä¸ª</span></span><br><span class="line">                <span class="keyword">if</span> (arr[j] &lt; arr[min])</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">// å¦‚æœæœŸé—´å‡ºç°å°äºæœ€å°å…ƒç´ çš„å€¼ï¼Œåˆ™äº¤æ¢ä½ç½®</span></span><br><span class="line">                    min = j;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (min != i)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">int</span> temp = arr[i];</span><br><span class="line">                arr[i] = arr[min];</span><br><span class="line">                arr[min] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¾“å‡ºï¼š</p><p>æœªæ’åºå‰çš„æ•°ç»„ï¼š<br>5 7 3 8 6 9<br>æ’åºåçš„æ•°ç»„ï¼š<br>3 5 6 7 8 9</p></blockquote><hr><h4 id="å †æ’åº">å †æ’åº</h4><blockquote><p>å †æ’åºï¼šå †çš„æ˜¯æŒ‡å°±æ˜¯æ»¡è¶³äºŒå‰æ ‘ä¸­ä»»ä¸€éå¶å­ç»“ç‚¹å‡å°äºï¼ˆå¤§äºï¼‰å®ƒçš„å­©å­ç»“ç‚¹çš„å®Œå…¨äºŒå‰æ ‘ã€‚</p><ul><li>æ—¶é—´å¤æ‚åº¦=O(nlog<sub>2</sub>n)ï¼Œç©ºé—´å¤æ‚åº¦=O(1)ã€‚ä¸ç¨³å®šæ’åºã€‚</li><li>å°æ ¹å †ï¼šè‹¥nä¸ªå…ƒç´ çš„åºåˆ—{a<sub>1</sub>a<sub>2</sub>â€¦a<sub>n</sub>}æ»¡è¶³a<sub>i</sub> â‰¤ a<sub>2i</sub>å’Œa<sub>i</sub> â‰¤ a<sub>2i+1</sub>ã€‚</li><li>å¤§æ ¹å †ï¼šè‹¥nä¸ªå…ƒç´ çš„åºåˆ—{a<sub>1</sub>a<sub>2</sub>â€¦a<sub>n</sub>}æ»¡è¶³a<sub>i</sub> â‰¥ a<sub>2i</sub>å’Œa<sub>i</sub> â‰¥ a<sub>2i+1</sub>ã€‚</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/AzureBubble/PicBed@main/showImg/%E5%A0%86%E6%8E%92%E5%BA%8F.gif" alt="å †æ’åº"></p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span>[] arr = &#123; <span class="number">5</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">9</span> &#125;;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æœªæ’åºå‰çš„æ•°ç»„ï¼š&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; arr.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.Write(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        Console.WriteLine();</span><br><span class="line">        <span class="comment">//big_heap_sort(arr);</span></span><br><span class="line">        small_heap_sort(arr);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æ’åºåçš„æ•°ç»„ï¼š&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; arr.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.Write(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">big_heap_sort</span>(<span class="params"><span class="built_in">int</span>[] arr</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ä»æ ‘çš„ç¬¬arr.Length / 2 - 1ä¸ªç»“ç‚¹å¼€å§‹å»ºç«‹å¤§æ ¹å †</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = arr.Length / <span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        &#123;</span><br><span class="line">            big_heap_adjust(arr, i, arr.Length);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = arr.Length - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// æŠŠæ ¹ç»“ç‚¹ä¸æœ€åä¸€ä¸ªç»“ç‚¹è¿›è¡Œäº¤æ¢ï¼ŒæŠŠæœ€å¤§å€¼æ”¾åˆ°æœ€å</span></span><br><span class="line">            <span class="built_in">int</span> temp = arr[<span class="number">0</span>];</span><br><span class="line">            arr[<span class="number">0</span>] = arr[i];</span><br><span class="line">            arr[i] = temp;</span><br><span class="line">            <span class="comment">// äº¤æ¢åï¼Œä»¥æ ¹ç»“ç‚¹å¼€å§‹ï¼Œé‡æ–°è°ƒæ•´ä¸ºå¤§æ ¹å †</span></span><br><span class="line">            big_heap_adjust(arr, <span class="number">0</span>, i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å»ºç«‹å¤§æ ¹å †ï¼šå‡åºï¼Œæœ€å¤§å€¼ï¼ˆæ ¹ç»“ç‚¹ï¼‰ä¸æœ€åä¸€ä¸ªç»“ç‚¹äº¤æ¢ä½ç½®</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">big_heap_adjust</span>(<span class="params"><span class="built_in">int</span>[] arr, <span class="built_in">int</span> parent, <span class="built_in">int</span> length</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ä¸´æ—¶å­˜å‚¨æ ¹ç»“ç‚¹æ•°å€¼</span></span><br><span class="line">        <span class="built_in">int</span> temp = arr[parent];</span><br><span class="line">        <span class="comment">// æ‰¾åˆ°æ ¹ç»“ç‚¹çš„å·¦å­©å­</span></span><br><span class="line">        <span class="built_in">int</span> child = parent * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// å­©å­ç»“ç‚¹ä¸å¤§äºæ•°ç»„é•¿åº¦</span></span><br><span class="line">        <span class="keyword">while</span> (child &lt; length)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœå³å­©å­åœ¨æ•°ç»„é•¿åº¦å†… &amp;&amp; å³å­©å­ &gt; å·¦å­©å­</span></span><br><span class="line">            <span class="keyword">if</span> (child + <span class="number">1</span> &lt; length &amp;&amp; arr[child + <span class="number">1</span>] &gt; arr[child])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// è®¾ç½®ä¸ºå³å­©å­</span></span><br><span class="line">                child++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å¦‚æœæ ¹ç»“ç‚¹ &gt; å­©å­ç»“ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> (temp &gt; arr[child])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">break</span>; <span class="comment">// é€€å‡º+</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å¦åˆ™ï¼Œæ ¹ç»“ç‚¹ä¸æœ€å¤§çš„å­©å­ç»“ç‚¹äº¤æ¢ä½ç½®</span></span><br><span class="line">            arr[parent] = arr[child];</span><br><span class="line">            <span class="comment">// æ ¹ç»“ç‚¹è®¾ç½®ä¸ºäº¤æ¢åçš„å­©å­ç»“ç‚¹ä¸‹æ ‡</span></span><br><span class="line">            parent = child;</span><br><span class="line">            <span class="comment">// æ‰¾åˆ°æ–°çš„å·¦å­©å­ä¸‹æ ‡</span></span><br><span class="line">            child = parent * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ­¤æ—¶parentå·²ä¸ºæœ€å°çš„å­©å­ç»“ç‚¹ï¼ŒæŠŠtempæ”¾åˆ°æ­¤ä½ç½®ä¸Š</span></span><br><span class="line">        arr[parent] = temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">small_heap_sort</span>(<span class="params"><span class="built_in">int</span>[] arr</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = arr.Length / <span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        &#123;</span><br><span class="line">            small_heap_sort(arr, i, arr.Length);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = arr.Length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">int</span> temp = arr[<span class="number">0</span>];</span><br><span class="line">            arr[<span class="number">0</span>] = arr[i];</span><br><span class="line">            arr[i] = temp;</span><br><span class="line">            small_heap_sort(arr, <span class="number">0</span>, i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°æ ¹å †:é™åºï¼Œæœ€å°å€¼ï¼ˆæ ¹ç»“ç‚¹ï¼‰ä¸æœ€åä¸€ä¸ªç»“ç‚¹äº¤æ¢ä½ç½®</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">small_heap_sort</span>(<span class="params"><span class="built_in">int</span>[] arr, <span class="built_in">int</span> parent, <span class="built_in">int</span> length</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> temp = arr[parent];</span><br><span class="line">        <span class="built_in">int</span> child = parent * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (child &lt; length)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (child + <span class="number">1</span> &lt; length &amp;&amp; arr[child + <span class="number">1</span>] &lt; arr[child])</span><br><span class="line">            &#123;</span><br><span class="line">                child++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (temp &lt; arr[child])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            arr[parent] = arr[child];</span><br><span class="line">            parent = child;</span><br><span class="line">            child = parent * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[parent] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;ç®€å•é€‰æ‹©æ’åº&quot;&gt;ç®€å•é€‰æ‹©æ’åº&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;ç®€å•é€‰æ‹©æ’åºï¼šåœ¨å¾…æ’åºçš„æ•°æ®ä¸­é€‰å‡ºæœ€å¤§ï¼ˆå°ï¼‰çš„å…ƒç´ æ”¾åœ¨å…¶æœ€ç»ˆçš„ä½ç½®ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ—¶é—´å¤æ‚åº¦=O(n&lt;sup&gt;2&lt;/sup&gt;)ï¼Œç©ºé—´å¤æ‚åº¦=O(1)ã€‚ç¨³å®šæ’åºã€‚&lt;/li&gt;
&lt;/u</summary>
      
    
    
    
    <category term="å­¦ä¹ ç¬”è®°" scheme="https://azzurebubble.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="C#" scheme="https://azzurebubble.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C/"/>
    
    <category term="æ’åºç®—æ³•" scheme="https://azzurebubble.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="C#" scheme="https://azzurebubble.github.io/tags/C/"/>
    
    <category term="æ’åºç®—æ³•" scheme="https://azzurebubble.github.io/tags/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"/>
    
    <category term="é€‰æ‹©æ’åº" scheme="https://azzurebubble.github.io/tags/%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
</feed>
